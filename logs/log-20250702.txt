2025-07-02 09:26:40.292 -04:00 [INF] Now listening on: http://localhost:5014
2025-07-02 09:26:40.674 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-02 09:26:40.678 -04:00 [INF] Hosting environment: Development
2025-07-02 09:26:40.679 -04:00 [INF] Content root path: /home/agr/Documentos/HostalIslaAzul
2025-07-02 09:27:16.105 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/ - null null
2025-07-02 09:27:16.492 -04:00 [WRN] Failed to determine the https port for redirect.
2025-07-02 09:27:16.518 -04:00 [INF] HTTP GET / responded 404 in 20.0014 ms
2025-07-02 09:27:16.546 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/ - 404 0 null 454.1923ms
2025-07-02 09:27:16.594 -04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5014/, Response status code: 404
2025-07-02 09:27:32.505 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger - null null
2025-07-02 09:27:32.525 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger - 301 0 null 19.416ms
2025-07-02 09:27:32.587 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/index.html - null null
2025-07-02 09:27:32.933 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/index.html - 200 null text/html;charset=utf-8 346.1903ms
2025-07-02 09:27:33.122 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui.css - null null
2025-07-02 09:27:33.125 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui-standalone-preset.js - null null
2025-07-02 09:27:33.124 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui-bundle.js - null null
2025-07-02 09:27:33.289 -04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-07-02 09:27:33.294 -04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-07-02 09:27:33.294 -04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-07-02 09:27:33.329 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui.css - 200 152034 text/css 207.1029ms
2025-07-02 09:27:33.331 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 206.7841ms
2025-07-02 09:27:33.328 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 202.8655ms
2025-07-02 09:27:33.865 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/favicon-16x16.png - null null
2025-07-02 09:27:33.868 -04:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-07-02 09:27:33.870 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/favicon-16x16.png - 200 665 image/png 3.9824ms
2025-07-02 09:27:34.315 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - null null
2025-07-02 09:27:34.925 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 609.5993ms
2025-07-02 09:28:04.608 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 139
2025-07-02 09:28:04.624 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 09:28:04.757 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 09:28:07.790 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 09:28:08.442 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 09:28:08.463 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 3686.8511ms
2025-07-02 09:28:08.464 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 09:28:08.465 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 3847.5755 ms
2025-07-02 09:28:08.497 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 3889.1695ms
2025-07-02 09:28:47.413 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 141
2025-07-02 09:28:47.419 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 09:28:47.424 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 09:28:47.578 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 09:28:47.580 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 154.1674ms
2025-07-02 09:28:47.585 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 09:28:47.596 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 177.1696 ms
2025-07-02 09:28:47.598 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 185.2143ms
2025-07-02 09:29:04.378 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas - null null
2025-07-02 09:29:04.381 -04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-02 09:29:04.382 -04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-02 09:29:04.383 -04:00 [INF] HTTP GET /api/Reservas responded 405 in 1.6429 ms
2025-07-02 09:29:04.384 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas - 405 0 null 5.4585ms
2025-07-02 09:29:08.651 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas - null null
2025-07-02 09:29:08.657 -04:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-02 09:29:08.659 -04:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-02 09:29:08.660 -04:00 [INF] HTTP GET /api/Reservas responded 405 in 3.1975 ms
2025-07-02 09:29:08.664 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas - 405 0 null 13.0164ms
2025-07-02 09:29:20.922 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reserva - null null
2025-07-02 09:29:20.925 -04:00 [INF] HTTP GET /api/Reserva responded 404 in 0.0880 ms
2025-07-02 09:29:20.931 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reserva - 404 0 null 8.3286ms
2025-07-02 09:29:20.939 -04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5014/api/Reserva, Response status code: 404
2025-07-02 09:29:28.196 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api - null null
2025-07-02 09:29:28.198 -04:00 [INF] HTTP GET /api responded 404 in 0.0803 ms
2025-07-02 09:29:28.200 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api - 404 0 null 4.1402ms
2025-07-02 09:29:28.202 -04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5014/api, Response status code: 404
2025-07-02 09:29:32.237 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/ - null null
2025-07-02 09:29:32.239 -04:00 [INF] HTTP GET / responded 404 in 0.1096 ms
2025-07-02 09:29:32.243 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/ - 404 0 null 7.6291ms
2025-07-02 09:29:32.245 -04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5014/, Response status code: 404
2025-07-02 09:30:40.914 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - null null
2025-07-02 09:30:40.917 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 09:30:40.955 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 09:30:45.428 -04:00 [INF] Executed DbCommand (226ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
ORDER BY [c].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 09:30:45.842 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 09:30:45.962 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 5006.2153ms
2025-07-02 09:30:45.966 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 09:30:45.971 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 5054.3805 ms
2025-07-02 09:30:46.004 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 5089.6221ms
2025-07-02 12:23:59.405 -04:00 [INF] Application is shutting down...
2025-07-02 13:00:53.544 -04:00 [INF] Now listening on: http://localhost:5014
2025-07-02 13:00:53.798 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-02 13:00:53.800 -04:00 [INF] Hosting environment: Development
2025-07-02 13:00:53.801 -04:00 [INF] Content root path: /home/agr/Documentos/HostalIslaAzul
2025-07-02 13:01:00.453 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/index.html - null null
2025-07-02 13:01:01.108 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/index.html - 200 null text/html;charset=utf-8 659.9064ms
2025-07-02 13:01:01.266 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui-standalone-preset.js - null null
2025-07-02 13:01:01.372 -04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-07-02 13:01:01.374 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/swagger-ui-standalone-preset.js - 499 230280 text/javascript 107.911ms
2025-07-02 13:01:01.927 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/favicon-16x16.png - null null
2025-07-02 13:01:01.958 -04:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-07-02 13:01:01.960 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/favicon-16x16.png - 499 665 image/png 33.01ms
2025-07-02 13:01:02.272 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - null null
2025-07-02 13:01:02.920 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 647.7271ms
2025-07-02 13:02:03.316 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:02:03.371 -04:00 [WRN] Failed to determine the https port for redirect.
2025-07-02 13:02:03.422 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:03.526 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:02:06.648 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:02:11.209 -04:00 [INF] Executed DbCommand (248ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:02:12.192 -04:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:02:12.470 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:02:12.487 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 1)
2025-07-02 13:02:12.537 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:02:12.722 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 9180.9297ms
2025-07-02 13:02:12.725 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:12.741 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 9398.8698 ms
2025-07-02 13:02:12.811 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 9495.7172ms
2025-07-02 13:02:36.054 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:02:36.067 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:36.070 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:02:36.261 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:02:36.277 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:02:36.292 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:02:36.296 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 2)
2025-07-02 13:02:36.305 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:02:36.333 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 257.7762ms
2025-07-02 13:02:36.345 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:36.357 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 290.0250 ms
2025-07-02 13:02:36.368 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 311.8651ms
2025-07-02 13:02:41.807 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:02:41.809 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:41.810 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:02:42.164 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:02:42.175 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:02:42.199 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:02:42.201 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 3)
2025-07-02 13:02:42.202 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:02:42.204 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 392.6811ms
2025-07-02 13:02:42.205 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:42.206 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 397.4789 ms
2025-07-02 13:02:42.208 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 401.198ms
2025-07-02 13:02:47.048 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:02:47.051 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:47.052 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:02:47.070 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:02:47.089 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:02:47.109 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:02:47.120 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 4)
2025-07-02 13:02:47.124 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:02:47.129 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 75.7912ms
2025-07-02 13:02:47.134 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:47.138 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 86.8525 ms
2025-07-02 13:02:47.145 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 96.6374ms
2025-07-02 13:02:51.658 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:02:51.660 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:51.664 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:02:51.692 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:02:51.720 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:02:51.742 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:02:51.746 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 5)
2025-07-02 13:02:51.751 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:02:51.756 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 91.0439ms
2025-07-02 13:02:51.759 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:02:51.763 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 102.5963 ms
2025-07-02 13:02:51.779 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 120.3141ms
2025-07-02 13:03:01.062 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:03:01.063 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:01.064 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:01.078 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:01.092 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:01.109 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:01.112 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 6)
2025-07-02 13:03:01.113 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:01.115 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 50.5402ms
2025-07-02 13:03:01.116 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:01.118 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 54.6789 ms
2025-07-02 13:03:01.123 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 61.2035ms
2025-07-02 13:03:06.010 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:03:06.011 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:06.012 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:06.029 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:06.042 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:06.056 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:06.067 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 7)
2025-07-02 13:03:06.071 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:06.079 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 64.3392ms
2025-07-02 13:03:06.080 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:06.081 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 70.1661 ms
2025-07-02 13:03:06.084 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 74.079ms
2025-07-02 13:03:12.874 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:03:12.892 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:12.896 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:12.929 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:12.938 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:12.951 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:12.954 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 8)
2025-07-02 13:03:12.955 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:12.964 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 66.4717ms
2025-07-02 13:03:12.964 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:12.968 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 72.6617 ms
2025-07-02 13:03:12.979 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 105.8138ms
2025-07-02 13:03:16.804 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:03:16.814 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:16.831 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:16.848 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:16.858 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:16.913 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:16.916 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 9)
2025-07-02 13:03:16.918 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:16.926 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 91.5267ms
2025-07-02 13:03:16.927 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:16.929 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 116.0035 ms
2025-07-02 13:03:16.934 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 129.3335ms
2025-07-02 13:03:20.846 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 53
2025-07-02 13:03:20.847 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:20.848 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:20.866 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:20.886 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:20.898 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:20.899 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 10)
2025-07-02 13:03:20.900 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:20.901 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 52.6276ms
2025-07-02 13:03:20.902 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:20.903 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 55.1359 ms
2025-07-02 13:03:20.903 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 57.2328ms
2025-07-02 13:03:38.032 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 52
2025-07-02 13:03:38.037 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:38.040 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:38.073 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:38.096 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:38.116 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:38.119 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 11)
2025-07-02 13:03:38.122 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:38.124 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 82.5034ms
2025-07-02 13:03:38.126 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:38.127 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 90.0007 ms
2025-07-02 13:03:38.129 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 97.1119ms
2025-07-02 13:03:41.605 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 52
2025-07-02 13:03:41.606 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:41.607 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:41.620 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:41.629 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:41.644 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:41.646 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 12)
2025-07-02 13:03:41.648 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:41.652 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 44.5975ms
2025-07-02 13:03:41.655 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:41.660 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 53.8083 ms
2025-07-02 13:03:41.662 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 58.5536ms
2025-07-02 13:03:45.663 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 52
2025-07-02 13:03:45.664 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:45.665 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:45.690 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:45.711 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:45.719 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:45.721 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 13)
2025-07-02 13:03:45.721 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:45.727 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 61.2135ms
2025-07-02 13:03:45.732 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:45.736 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 72.1508 ms
2025-07-02 13:03:45.741 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 77.318ms
2025-07-02 13:03:51.753 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 52
2025-07-02 13:03:51.766 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:51.767 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:51.792 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:51.806 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:51.819 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:51.821 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 14)
2025-07-02 13:03:51.823 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:51.824 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 56.8164ms
2025-07-02 13:03:51.830 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:51.831 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 64.8430 ms
2025-07-02 13:03:51.833 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 79.9807ms
2025-07-02 13:03:57.466 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones - application/json 52
2025-07-02 13:03:57.468 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:57.470 -04:00 [INF] Route matched with {action = "CrearHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearHabitacion(HostalIslaAzul.Application.Services.HabitacionDto) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:03:57.480 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Habitaciones] AS [h]
        WHERE [h].[Numero] = @__dto_Numero_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:03:57.489 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Habitaciones] ([EstaFueraDeServicio], [Numero])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-07-02 13:03:57.503 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:03:57.504 -04:00 [INF] Traza registrada: Creación en Habitaciones (ID: 15)
2025-07-02 13:03:57.505 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 13:03:57.506 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul) in 34.7814ms
2025-07-02 13:03:57.507 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.CrearHabitacion (HostalIslaAzul)'
2025-07-02 13:03:57.507 -04:00 [INF] HTTP POST /api/Habitaciones responded 201 in 39.6998 ms
2025-07-02 13:03:57.509 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones - 201 null application/json; charset=utf-8 43.2871ms
2025-07-02 13:04:08.410 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=10 - null null
2025-07-02 13:04:08.412 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:04:08.458 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:04:08.847 -04:00 [INF] Executed DbCommand (30ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 13:04:08.887 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 13:04:08.890 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 405.9477ms
2025-07-02 13:04:08.890 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:04:08.891 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 479.7506 ms
2025-07-02 13:04:08.893 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 483.2458ms
2025-07-02 13:05:25.500 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - null null
2025-07-02 13:05:25.502 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:05:25.503 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:05:25.530 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 13:05:25.535 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 13:05:25.537 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 32.384ms
2025-07-02 13:05:25.547 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:05:25.549 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 47.5537 ms
2025-07-02 13:05:25.552 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 51.9759ms
2025-07-02 13:05:59.894 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?estaFueraDeServicio=true&pagina=1&tamanoPagina=20 - null null
2025-07-02 13:05:59.895 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:05:59.896 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:05:59.958 -04:00 [INF] Executed DbCommand (33ms) [Parameters=[@__estaFueraDeServicio_Value_0='?' (DbType = Boolean), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[EstaFueraDeServicio] = @__estaFueraDeServicio_Value_0
ORDER BY [h].[Numero]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-02 13:05:59.961 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 13:05:59.962 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 65.5825ms
2025-07-02 13:05:59.964 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:05:59.965 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 69.3836 ms
2025-07-02 13:05:59.966 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?estaFueraDeServicio=true&pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 71.7696ms
2025-07-02 13:06:20.922 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?busqueda=33&pagina=1&tamanoPagina=20 - null null
2025-07-02 13:06:20.925 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:06:20.928 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:06:21.182 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__busqueda_0_contains='?' (Size = 450), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE LOWER([h].[Numero]) LIKE @__busqueda_0_contains ESCAPE N'\'
ORDER BY [h].[Numero]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-02 13:06:21.185 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 13:06:21.186 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 256.0645ms
2025-07-02 13:06:21.187 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:06:21.195 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 269.7323 ms
2025-07-02 13:06:21.197 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?busqueda=33&pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 275.6345ms
2025-07-02 13:07:21.320 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 13:07:21.323 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 13:07:21.342 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 13:07:21.480 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 13:07:21.558 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:07:21.718 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 13:07:22.115 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (Size = 450), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reservas] ([ClienteId], [EstaCancelada], [EstaElClienteEnHostal], [FechaCancelacion], [FechaEntrada], [FechaReservacion], [FechaSalida], [HabitacionNumero], [Importe], [MotivoCancelacion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-07-02 13:07:22.248 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'HostalIslaAzul.Infrastructure.HostalDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): No se puede insertar el valor NULL en la columna 'HabitacionId', tabla 'HostalIslaAzulDb.dbo.Reservas'. La columna no admite valores NULL. Error de INSERT.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cbc2e6e4-29a3-46df-bb9d-a453fa934f9a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): No se puede insertar el valor NULL en la columna 'HabitacionId', tabla 'HostalIslaAzulDb.dbo.Reservas'. La columna no admite valores NULL. Error de INSERT.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cbc2e6e4-29a3-46df-bb9d-a453fa934f9a
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-02 13:07:22.262 -04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-07-02 13:07:22.264 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 920.373ms
2025-07-02 13:07:22.266 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 13:07:22.267 -04:00 [ERR] HTTP POST /api/Reservas responded 500 in 944.1765 ms
2025-07-02 13:07:22.271 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 500 null text/plain; charset=utf-8 950.242ms
2025-07-02 13:24:14.979 -04:00 [INF] Application is shutting down...
2025-07-02 13:26:41.979 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:26:42.238 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:26:42.377 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:26:43.005 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:26:43.006 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:26:43.020 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:26:47.018 -04:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 13:26:47.175 -04:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 13:26:47.278 -04:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-02 13:27:52.228 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:27:52.466 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:27:52.590 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:27:53.207 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:27:53.208 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:27:53.221 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:28:33.166 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:28:33.436 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:28:33.552 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:28:34.156 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:28:34.157 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:28:34.170 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:29:11.465 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:29:11.718 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:29:11.835 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:29:14.392 -04:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 13:29:14.544 -04:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 13:29:14.556 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 13:29:14.565 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 13:29:14.691 -04:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-02 13:29:14.801 -04:00 [INF] Applying migration '20250702172836_UpdateInitial'.
2025-07-02 13:29:15.123 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Reservas] ADD [ClienteId1] int NULL;
2025-07-02 13:29:15.130 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Reservas] ADD [HabitacionId1] int NULL;
2025-07-02 13:29:15.294 -04:00 [INF] Executed DbCommand (162ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AmasDeLlaves]') AND [c].[name] = N'CI');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [AmasDeLlaves] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [AmasDeLlaves] ALTER COLUMN [CI] nvarchar(450) NOT NULL;
2025-07-02 13:29:15.304 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reservas_ClienteId1] ON [Reservas] ([ClienteId1]);
2025-07-02 13:29:15.309 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reservas_HabitacionId1] ON [Reservas] ([HabitacionId1]);
2025-07-02 13:29:15.322 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AmasDeLlaves_CI] ON [AmasDeLlaves] ([CI]);
2025-07-02 13:29:15.349 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Reservas] ADD CONSTRAINT [FK_Reservas_Clientes_ClienteId1] FOREIGN KEY ([ClienteId1]) REFERENCES [Clientes] ([Id]);
2025-07-02 13:29:15.361 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Reservas] ADD CONSTRAINT [FK_Reservas_Habitaciones_HabitacionId1] FOREIGN KEY ([HabitacionId1]) REFERENCES [Habitaciones] ([Id]);
2025-07-02 13:29:15.371 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250702172836_UpdateInitial', N'8.0.10');
2025-07-02 13:29:35.394 -04:00 [INF] Now listening on: http://localhost:5014
2025-07-02 13:29:35.671 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-02 13:29:35.673 -04:00 [INF] Hosting environment: Development
2025-07-02 13:29:35.674 -04:00 [INF] Content root path: /home/agr/Documentos/HostalIslaAzul
2025-07-02 13:29:42.933 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/index.html - null null
2025-07-02 13:29:43.603 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/index.html - 200 null text/html;charset=utf-8 677.4506ms
2025-07-02 13:29:45.202 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - null null
2025-07-02 13:29:45.853 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 650.6189ms
2025-07-02 13:30:02.297 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - null null
2025-07-02 13:30:02.335 -04:00 [WRN] Failed to determine the https port for redirect.
2025-07-02 13:30:02.379 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 13:30:02.512 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 13:30:05.827 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:30:05.829 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 13:30:05.968 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 13:30:10.350 -04:00 [INF] Executed DbCommand (245ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
ORDER BY [c].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 13:30:10.724 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 13:30:10.829 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 8300.4346ms
2025-07-02 13:30:10.831 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 13:30:10.843 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 8523.9241 ms
2025-07-02 13:30:10.889 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 8592.9252ms
2025-07-02 13:30:36.623 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=10 - null null
2025-07-02 13:30:36.634 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:30:36.704 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 13:30:36.941 -04:00 [INF] Executed DbCommand (41ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 13:30:37.024 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 13:30:37.035 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 326.8859ms
2025-07-02 13:30:37.037 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 13:30:37.040 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 406.7555 ms
2025-07-02 13:30:37.043 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 419.8892ms
2025-07-02 13:31:35.172 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 13:31:35.181 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 13:31:35.213 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 13:31:35.684 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 13:31:35.808 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 13:31:35.946 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 13:31:36.737 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reservas] ([ClienteId], [ClienteId1], [EstaCancelada], [EstaElClienteEnHostal], [FechaCancelacion], [FechaEntrada], [FechaReservacion], [FechaSalida], [HabitacionId], [HabitacionId1], [HabitacionNumero], [Importe], [MotivoCancelacion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-02 13:31:36.965 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 13:31:36.978 -04:00 [INF] Traza registrada: Creación en Reservas (ID: 2)
2025-07-02 13:31:36.990 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 13:31:37.158 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 1943.934ms
2025-07-02 13:31:37.167 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 13:31:37.168 -04:00 [INF] HTTP POST /api/Reservas responded 201 in 1988.0775 ms
2025-07-02 13:31:37.179 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 201 null application/json; charset=utf-8 2007.5285ms
2025-07-02 13:33:13.417 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/1 - application/json 140
2025-07-02 13:33:13.422 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 13:33:13.452 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 13:33:13.808 -04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 13:33:13.815 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 13:33:13.817 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 364.0567ms
2025-07-02 13:33:13.818 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 13:33:13.819 -04:00 [INF] HTTP PUT /api/Reservas/1 responded 400 in 396.5625 ms
2025-07-02 13:33:13.821 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/1 - 400 null text/plain; charset=utf-8 403.243ms
2025-07-02 14:00:52.351 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - null null
2025-07-02 14:00:52.358 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 14:00:52.377 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:00:54.076 -04:00 [INF] Executed DbCommand (140ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 14:00:54.081 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 14:00:54.088 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 1708.9446ms
2025-07-02 14:00:54.090 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 14:00:54.091 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 1733.0557 ms
2025-07-02 14:00:54.093 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - 200 null application/json; charset=utf-8 1741.9299ms
2025-07-02 14:01:46.134 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/1 - null null
2025-07-02 14:01:46.147 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 14:01:46.171 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:01:46.240 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 14:01:46.244 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:01:46.247 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 74.142ms
2025-07-02 14:01:46.250 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 14:01:46.251 -04:00 [INF] HTTP GET /api/Reservas/1 responded 400 in 105.2740 ms
2025-07-02 14:01:46.255 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/1 - 400 null text/plain; charset=utf-8 120.6466ms
2025-07-02 14:06:23.614 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-disponibles - null null
2025-07-02 14:06:23.620 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul)'
2025-07-02 14:06:23.646 -04:00 [INF] Route matched with {action = "ObtenerHabitacionesDisponibles", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacionesDisponibles(System.DateTime, System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:06:23.725 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__fechaFin_0='?' (DbType = DateTime2), @__fechaInicio_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[HabitacionNumero]
FROM [Reservas] AS [r]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fechaFin_0 AND [r].[FechaSalida] >= @__fechaInicio_1
2025-07-02 14:06:24.048 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[@__habitacionesOcupadas_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[EstaFueraDeServicio] = CAST(0 AS bit) AND [h].[Numero] NOT IN (
    SELECT [h0].[value]
    FROM OPENJSON(@__habitacionesOcupadas_0) WITH ([value] nvarchar(450) '$') AS [h0]
)
2025-07-02 14:06:24.052 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-02 14:06:24.055 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul) in 398.7551ms
2025-07-02 14:06:24.056 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul)'
2025-07-02 14:06:24.056 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-disponibles responded 200 in 436.6280 ms
2025-07-02 14:06:24.057 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-disponibles - 200 null application/json; charset=utf-8 443.046ms
2025-07-02 14:07:18.239 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 14:07:18.241 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 14:07:18.241 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:07:18.266 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 14:07:18.288 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:07:18.290 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:07:18.291 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 49.4267ms
2025-07-02 14:07:18.292 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 14:07:18.293 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 52.7252 ms
2025-07-02 14:07:18.294 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 54.9479ms
2025-07-02 14:07:40.331 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 14:07:40.333 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 14:07:40.335 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:07:40.348 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 14:07:40.355 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:07:40.358 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:07:40.359 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 23.1198ms
2025-07-02 14:07:40.360 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 14:07:40.360 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 27.6070 ms
2025-07-02 14:07:40.361 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 30.1219ms
2025-07-02 14:07:59.525 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 14:07:59.529 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 14:07:59.532 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:07:59.546 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 14:07:59.552 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:07:59.558 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:07:59.561 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 26.2417ms
2025-07-02 14:07:59.566 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 14:07:59.567 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 38.4414 ms
2025-07-02 14:07:59.568 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 42.8875ms
2025-07-02 14:08:10.661 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - null null
2025-07-02 14:08:10.663 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 14:08:10.664 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:08:10.673 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 14:08:10.706 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 14:08:10.707 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 42.7549ms
2025-07-02 14:08:10.708 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 14:08:10.709 -04:00 [INF] HTTP GET /api/Reservas/2 responded 200 in 45.7475 ms
2025-07-02 14:08:10.710 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - 200 null application/json; charset=utf-8 48.6996ms
2025-07-02 14:08:46.118 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/2 - application/json 140
2025-07-02 14:08:46.127 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 14:08:46.127 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:08:46.151 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 14:08:46.181 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 14:08:46.213 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:08:46.262 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[@p13='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [ClienteId1] = @p1, [EstaCancelada] = @p2, [EstaElClienteEnHostal] = @p3, [FechaCancelacion] = @p4, [FechaEntrada] = @p5, [FechaReservacion] = @p6, [FechaSalida] = @p7, [HabitacionId] = @p8, [HabitacionId1] = @p9, [HabitacionNumero] = @p10, [Importe] = @p11, [MotivoCancelacion] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-07-02 14:08:46.292 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 14:08:46.294 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 2)
2025-07-02 14:08:46.296 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 14:08:46.297 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 169.0593ms
2025-07-02 14:08:46.301 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 14:08:46.301 -04:00 [INF] HTTP PUT /api/Reservas/2 responded 200 in 174.5743 ms
2025-07-02 14:08:46.302 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/2 - 200 null application/json; charset=utf-8 184.3344ms
2025-07-02 14:13:20.177 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/2/cambiar-habitacion - application/json 36
2025-07-02 14:13:20.178 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 14:13:20.193 -04:00 [INF] Route matched with {action = "CambiarHabitacion", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CambiarHabitacion(Int32, HostalIslaAzul.Controllers.CambiarHabitacionDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:13:20.284 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 14:13:20.314 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__nuevoNumeroHabitacion_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__nuevoNumeroHabitacion_0
2025-07-02 14:13:20.359 -04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__nuevoNumeroHabitacion_0='?' (Size = 4000), @__reservaId_1='?' (DbType = Int32), @__reserva_FechaSalida_2='?' (DbType = DateTime2), @__reserva_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionNumero] = @__nuevoNumeroHabitacion_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[Id] <> @__reservaId_1 AND [r].[FechaEntrada] <= @__reserva_FechaSalida_2 AND [r].[FechaSalida] >= @__reserva_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:13:20.373 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p13='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [ClienteId1] = @p1, [EstaCancelada] = @p2, [EstaElClienteEnHostal] = @p3, [FechaCancelacion] = @p4, [FechaEntrada] = @p5, [FechaReservacion] = @p6, [FechaSalida] = @p7, [HabitacionId] = @p8, [HabitacionId1] = @p9, [HabitacionNumero] = @p10, [Importe] = @p11, [MotivoCancelacion] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-07-02 14:13:20.388 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 14:13:20.393 -04:00 [INF] Traza registrada: Cambio de habitación en Reservas (ID: 2)
2025-07-02 14:13:20.406 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 14:13:20.407 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul) in 211.6476ms
2025-07-02 14:13:20.408 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 14:13:20.410 -04:00 [INF] HTTP POST /api/Reservas/2/cambiar-habitacion responded 204 in 231.1875 ms
2025-07-02 14:13:20.412 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/2/cambiar-habitacion - 204 null null 234.3563ms
2025-07-02 14:13:52.048 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - null null
2025-07-02 14:13:52.051 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 14:13:52.052 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:13:52.067 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 14:13:52.069 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 14:13:52.070 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 16.7394ms
2025-07-02 14:13:52.072 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 14:13:52.072 -04:00 [INF] HTTP GET /api/Reservas/2 responded 200 in 21.7459 ms
2025-07-02 14:13:52.074 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - 200 null application/json; charset=utf-8 25.8289ms
2025-07-02 14:15:22.702 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/2/registrar-llegada - null 0
2025-07-02 14:15:22.714 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 14:15:22.735 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:15:22.754 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 14:15:22.764 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:15:22.767 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 31.5324ms
2025-07-02 14:15:22.770 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 14:15:22.773 -04:00 [INF] HTTP POST /api/Reservas/2/registrar-llegada responded 400 in 59.6137 ms
2025-07-02 14:15:22.781 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/2/registrar-llegada - 400 null text/plain; charset=utf-8 78.7953ms
2025-07-02 14:19:30.584 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones/1/fuera-de-servicio - null 0
2025-07-02 14:19:30.593 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul)'
2025-07-02 14:19:30.610 -04:00 [INF] Route matched with {action = "PonerFueraDeServicio", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PonerFueraDeServicio(Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 14:19:31.355 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Id] = @__p_0
2025-07-02 14:19:31.377 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__habitacion_Numero_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionNumero] = @__habitacion_Numero_0 AND [r].[EstaCancelada] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:19:31.424 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Habitaciones] SET [EstaFueraDeServicio] = @p0, [Numero] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-02 14:19:31.436 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 14:19:31.438 -04:00 [INF] Traza registrada: Fuera de servicio en Habitaciones (ID: 1)
2025-07-02 14:19:31.440 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 14:19:31.441 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul) in 829.6627ms
2025-07-02 14:19:31.441 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul)'
2025-07-02 14:19:31.442 -04:00 [INF] HTTP POST /api/Habitaciones/1/fuera-de-servicio responded 204 in 849.6081 ms
2025-07-02 14:19:31.443 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones/1/fuera-de-servicio - 204 null null 858.5728ms
2025-07-02 14:19:54.756 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?estaFueraDeServicio=true&pagina=1&tamanoPagina=20 - null null
2025-07-02 14:19:54.761 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:19:54.762 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 14:19:54.817 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__estaFueraDeServicio_Value_0='?' (DbType = Boolean), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[EstaFueraDeServicio] = @__estaFueraDeServicio_Value_0
ORDER BY [h].[Numero]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-02 14:19:54.821 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 14:19:54.823 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 60.2971ms
2025-07-02 14:19:54.825 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:19:54.826 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 65.1117 ms
2025-07-02 14:19:54.828 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?estaFueraDeServicio=true&pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 72.1039ms
2025-07-02 14:21:34.613 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-disponibles - null null
2025-07-02 14:21:34.617 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul)'
2025-07-02 14:21:34.618 -04:00 [INF] Route matched with {action = "ObtenerHabitacionesDisponibles", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacionesDisponibles(System.DateTime, System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:21:34.626 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fechaFin_0='?' (DbType = DateTime2), @__fechaInicio_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[HabitacionNumero]
FROM [Reservas] AS [r]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fechaFin_0 AND [r].[FechaSalida] >= @__fechaInicio_1
2025-07-02 14:21:34.633 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__habitacionesOcupadas_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[EstaFueraDeServicio] = CAST(0 AS bit) AND [h].[Numero] NOT IN (
    SELECT [h0].[value]
    FROM OPENJSON(@__habitacionesOcupadas_0) WITH ([value] nvarchar(450) '$') AS [h0]
)
2025-07-02 14:21:34.636 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-02 14:21:34.638 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul) in 19.4979ms
2025-07-02 14:21:34.639 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul)'
2025-07-02 14:21:34.651 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-disponibles responded 200 in 34.4370 ms
2025-07-02 14:21:34.653 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-disponibles - 200 null application/json; charset=utf-8 39.5329ms
2025-07-02 14:23:14.409 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - application/json 95
2025-07-02 14:23:14.415 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:14.441 -04:00 [INF] Route matched with {action = "CrearAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearAmaDeLlaves(HostalIslaAzul.Application.Services.AmaDeLlavesDto) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:23:14.482 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:23:14.486 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul) in 42.3098ms
2025-07-02 14:23:14.488 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:14.489 -04:00 [INF] HTTP POST /api/AmasDeLlaves responded 400 in 74.1598 ms
2025-07-02 14:23:14.491 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - 400 null text/plain; charset=utf-8 81.9274ms
2025-07-02 14:23:25.905 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - application/json 93
2025-07-02 14:23:25.910 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:25.917 -04:00 [INF] Route matched with {action = "CrearAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearAmaDeLlaves(HostalIslaAzul.Application.Services.AmaDeLlavesDto) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:23:25.930 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:23:25.936 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul) in 16.4ms
2025-07-02 14:23:25.946 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:25.950 -04:00 [INF] HTTP POST /api/AmasDeLlaves responded 400 in 39.8748 ms
2025-07-02 14:23:25.953 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - 400 null text/plain; charset=utf-8 48.0871ms
2025-07-02 14:23:31.723 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - application/json 93
2025-07-02 14:23:31.724 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:31.725 -04:00 [INF] Route matched with {action = "CrearAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearAmaDeLlaves(HostalIslaAzul.Application.Services.AmaDeLlavesDto) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:23:31.733 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:23:31.736 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul) in 9.8021ms
2025-07-02 14:23:31.738 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:31.739 -04:00 [INF] HTTP POST /api/AmasDeLlaves responded 400 in 15.6544 ms
2025-07-02 14:23:31.743 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - 400 null text/plain; charset=utf-8 20.0893ms
2025-07-02 14:23:51.003 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - application/json 86
2025-07-02 14:23:51.008 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:51.011 -04:00 [INF] Route matched with {action = "CrearAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearAmaDeLlaves(HostalIslaAzul.Application.Services.AmaDeLlavesDto) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:23:51.038 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_CI_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AmasDeLlaves] AS [a]
        WHERE [a].[CI] = @__dto_CI_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:23:51.041 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:23:51.045 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul) in 29.9148ms
2025-07-02 14:23:51.046 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:23:51.047 -04:00 [INF] HTTP POST /api/AmasDeLlaves responded 400 in 38.8304 ms
2025-07-02 14:23:51.050 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - 400 null text/plain; charset=utf-8 46.5432ms
2025-07-02 14:24:07.173 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - application/json 95
2025-07-02 14:24:07.176 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:24:07.177 -04:00 [INF] Route matched with {action = "CrearAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearAmaDeLlaves(HostalIslaAzul.Application.Services.AmaDeLlavesDto) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:24:07.190 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_CI_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AmasDeLlaves] AS [a]
        WHERE [a].[CI] = @__dto_CI_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:24:07.303 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AmasDeLlaves] ([CI], [NombreApellidos], [NumeroTelefonico])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-02 14:24:07.323 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 14:24:07.326 -04:00 [INF] Traza registrada: Creación en AmasDeLlaves (ID: 1)
2025-07-02 14:24:07.327 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.AmaDeLlaves'.
2025-07-02 14:24:07.337 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul) in 159.3078ms
2025-07-02 14:24:07.340 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.CrearAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:24:07.340 -04:00 [INF] HTTP POST /api/AmasDeLlaves responded 201 in 164.0407 ms
2025-07-02 14:24:07.341 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/AmasDeLlaves - 201 null application/json; charset=utf-8 168.6214ms
2025-07-02 14:25:04.875 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/AmasDeLlaves/1 - application/json 94
2025-07-02 14:25:04.877 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ModificarAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:25:04.891 -04:00 [INF] Route matched with {action = "ModificarAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarAmaDeLlaves(Int32, HostalIslaAzul.Application.Services.AmaDeLlavesDto) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:25:04.965 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 14:25:04.999 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__dto_CI_0='?' (Size = 450), @__id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AmasDeLlaves] AS [a]
        WHERE [a].[CI] = @__dto_CI_0 AND [a].[Id] <> @__id_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:25:05.024 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AmasDeLlaves] SET [CI] = @p0, [NombreApellidos] = @p1, [NumeroTelefonico] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-07-02 14:25:05.040 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 14:25:05.043 -04:00 [INF] Traza registrada: Modificación en AmasDeLlaves (ID: 1)
2025-07-02 14:25:05.046 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.AmaDeLlaves'.
2025-07-02 14:25:05.049 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.ModificarAmaDeLlaves (HostalIslaAzul) in 156.1228ms
2025-07-02 14:25:05.049 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ModificarAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:25:05.050 -04:00 [INF] HTTP PUT /api/AmasDeLlaves/1 responded 200 in 172.9518 ms
2025-07-02 14:25:05.051 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/AmasDeLlaves/1 - 200 null application/json; charset=utf-8 175.7491ms
2025-07-02 14:25:35.848 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves?pagina=1&tamanoPagina=10 - null null
2025-07-02 14:25:35.851 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul)'
2025-07-02 14:25:35.873 -04:00 [INF] Route matched with {action = "ListarAmasDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarAmasDeLlaves(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 14:25:35.943 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
ORDER BY [a].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 14:25:35.947 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.AmaDeLlaves, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 14:25:35.950 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul) in 67.8149ms
2025-07-02 14:25:35.951 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul)'
2025-07-02 14:25:35.953 -04:00 [INF] HTTP GET /api/AmasDeLlaves responded 200 in 101.9991 ms
2025-07-02 14:25:35.955 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 106.9347ms
2025-07-02 14:27:58.235 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-por-ama-de-llaves/1 - null null
2025-07-02 14:27:58.236 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:27:58.256 -04:00 [INF] Route matched with {action = "ObtenerHabitacionesPorAmaDeLlaves", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacionesPorAmaDeLlaves(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 14:27:58.279 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 14:27:58.298 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HabitacionNumero]
FROM [HabitacionesAmasDeLlaves] AS [h]
WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0
2025-07-02 14:27:58.300 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-02 14:27:58.303 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul) in 45.9749ms
2025-07-02 14:27:58.306 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul)'
2025-07-02 14:27:58.307 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-por-ama-de-llaves/1 responded 200 in 70.7025 ms
2025-07-02 14:27:58.310 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-por-ama-de-llaves/1 - 200 null application/json; charset=utf-8 75.1147ms
2025-07-02 14:45:14.668 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones/2/fuera-de-servicio - null 0
2025-07-02 14:45:14.669 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul)'
2025-07-02 14:45:14.669 -04:00 [INF] Route matched with {action = "PonerFueraDeServicio", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PonerFueraDeServicio(Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 14:45:15.483 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Id] = @__p_0
2025-07-02 14:45:15.494 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__habitacion_Numero_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionNumero] = @__habitacion_Numero_0 AND [r].[EstaCancelada] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 14:45:15.497 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 14:45:15.498 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul) in 828.4876ms
2025-07-02 14:45:15.500 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul)'
2025-07-02 14:45:15.500 -04:00 [INF] HTTP POST /api/Habitaciones/2/fuera-de-servicio responded 400 in 831.3940 ms
2025-07-02 14:45:15.501 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones/2/fuera-de-servicio - 400 null text/plain; charset=utf-8 833.0883ms
2025-07-02 14:46:02.244 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - null null
2025-07-02 14:46:02.246 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:46:02.246 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 14:46:02.262 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 14:46:02.266 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 14:46:02.269 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 22.0766ms
2025-07-02 14:46:02.271 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:46:02.272 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 26.5091 ms
2025-07-02 14:46:02.274 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 29.8672ms
2025-07-02 14:46:26.804 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - null null
2025-07-02 14:46:26.810 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:46:26.812 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 14:46:26.823 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 14:46:26.863 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 14:46:26.864 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 50.4606ms
2025-07-02 14:46:26.865 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:46:26.865 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 55.5768 ms
2025-07-02 14:46:26.866 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 61.8585ms
2025-07-02 14:46:27.361 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/favicon.ico - null null
2025-07-02 14:46:27.365 -04:00 [INF] HTTP GET /favicon.ico responded 404 in 0.3605 ms
2025-07-02 14:46:27.367 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/favicon.ico - 404 0 null 5.5317ms
2025-07-02 14:46:27.372 -04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5014/favicon.ico, Response status code: 404
2025-07-02 14:47:39.015 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - null null
2025-07-02 14:47:39.024 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:47:39.025 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 14:47:39.033 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 14:47:39.035 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 14:47:39.036 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 10.6226ms
2025-07-02 14:47:39.037 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 14:47:39.037 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 13.4170 ms
2025-07-02 14:47:39.039 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 23.2928ms
2025-07-02 14:50:37.217 -04:00 [INF] Application is shutting down...
2025-07-02 14:51:08.866 -04:00 [INF] Now listening on: http://localhost:5014
2025-07-02 14:51:09.199 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-02 14:51:09.202 -04:00 [INF] Hosting environment: Development
2025-07-02 14:51:09.204 -04:00 [INF] Content root path: /home/agr/Documentos/HostalIslaAzul
2025-07-02 14:52:30.077 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/index.html - null null
2025-07-02 14:52:30.692 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/index.html - 200 null text/html;charset=utf-8 621.4956ms
2025-07-02 14:52:32.229 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - null null
2025-07-02 14:52:32.776 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 547.3635ms
2025-07-02 15:06:14.913 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones - null null
2025-07-02 15:06:15.003 -04:00 [WRN] Failed to determine the https port for redirect.
2025-07-02 15:06:15.051 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 15:06:15.204 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 15:06:18.088 -04:00 [WRN] The foreign key property 'Reserva.ClienteId1' was created in shadow state because a conflicting property with the simple name 'ClienteId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 15:06:18.089 -04:00 [WRN] The foreign key property 'Reserva.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 15:06:18.222 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 15:06:22.211 -04:00 [INF] Executed DbCommand (198ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 15:06:22.615 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 15:06:22.780 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 7550.9507ms
2025-07-02 15:06:22.784 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 15:06:22.798 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 7818.5217 ms
2025-07-02 15:06:22.869 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones - 200 null application/json; charset=utf-8 7956.8202ms
2025-07-02 15:08:10.632 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones/1 - null null
2025-07-02 15:08:10.639 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ObtenerHabitacion (HostalIslaAzul)'
2025-07-02 15:08:10.664 -04:00 [INF] Route matched with {action = "ObtenerHabitacion", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacion(Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 15:08:11.030 -04:00 [INF] Executed DbCommand (36ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Id] = @__p_0
2025-07-02 15:08:11.040 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Habitacion'.
2025-07-02 15:08:11.042 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ObtenerHabitacion (HostalIslaAzul) in 377.0549ms
2025-07-02 15:08:11.043 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ObtenerHabitacion (HostalIslaAzul)'
2025-07-02 15:08:11.044 -04:00 [INF] HTTP GET /api/Habitaciones/1 responded 200 in 406.2068 ms
2025-07-02 15:08:11.047 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones/1 - 200 null application/json; charset=utf-8 415.2066ms
2025-07-02 15:28:28.391 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:28:28.403 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:28:28.439 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:28:28.592 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:28:28.597 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 153.5288ms
2025-07-02 15:28:28.618 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:28:28.621 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 217.9767 ms
2025-07-02 15:28:28.625 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 233.8274ms
2025-07-02 15:28:47.924 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:28:47.928 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:28:47.938 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:28:47.952 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:28:47.960 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 20.8409ms
2025-07-02 15:28:47.964 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:28:47.966 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 38.1299 ms
2025-07-02 15:28:47.969 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 44.8419ms
2025-07-02 15:29:14.427 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:29:14.430 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:29:14.431 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:29:15.533 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:29:15.641 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:29:15.688 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 15:29:16.532 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reservas] ([ClienteId], [ClienteId1], [EstaCancelada], [EstaElClienteEnHostal], [FechaCancelacion], [FechaEntrada], [FechaReservacion], [FechaSalida], [HabitacionId], [HabitacionId1], [HabitacionNumero], [Importe], [MotivoCancelacion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-02 15:29:16.716 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 15:29:16.731 -04:00 [INF] Traza registrada: Creación en Reservas (ID: 3)
2025-07-02 15:29:16.740 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 15:29:16.822 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 2388.7696ms
2025-07-02 15:29:16.822 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:29:16.823 -04:00 [INF] HTTP POST /api/Reservas responded 201 in 2393.2036 ms
2025-07-02 15:29:16.824 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 201 null application/json; charset=utf-8 2396.6112ms
2025-07-02 15:31:56.986 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - null null
2025-07-02 15:31:56.988 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 15:31:57.007 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:31:57.245 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 15:31:57.249 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 15:31:57.255 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 246.85ms
2025-07-02 15:31:57.256 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 15:31:57.257 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 269.5109 ms
2025-07-02 15:31:57.259 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - 200 null application/json; charset=utf-8 272.1948ms
2025-07-02 15:32:55.445 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - null null
2025-07-02 15:32:55.457 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 15:32:55.462 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:32:55.504 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 15:32:55.507 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 15:32:55.509 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 41.5463ms
2025-07-02 15:32:55.511 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 15:32:55.513 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 55.3669 ms
2025-07-02 15:32:55.516 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - 200 null application/json; charset=utf-8 70.0474ms
2025-07-02 15:33:37.469 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/2/registrar-llegada - null 0
2025-07-02 15:33:37.474 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 15:33:37.497 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:33:37.588 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 15:33:37.636 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:33:37.638 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 140.1546ms
2025-07-02 15:33:37.638 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 15:33:37.639 -04:00 [INF] HTTP POST /api/Reservas/2/registrar-llegada responded 400 in 165.0269 ms
2025-07-02 15:33:37.640 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/2/registrar-llegada - 400 null text/plain; charset=utf-8 170.9032ms
2025-07-02 15:34:53.698 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/2/cancelar - application/json 80
2025-07-02 15:34:53.704 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CancelarReserva (HostalIslaAzul)'
2025-07-02 15:34:53.728 -04:00 [INF] Route matched with {action = "CancelarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CancelarReserva(Int32, HostalIslaAzul.Controllers.CancelacionDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:34:53.791 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 15:34:53.843 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p13='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [ClienteId1] = @p1, [EstaCancelada] = @p2, [EstaElClienteEnHostal] = @p3, [FechaCancelacion] = @p4, [FechaEntrada] = @p5, [FechaReservacion] = @p6, [FechaSalida] = @p7, [HabitacionId] = @p8, [HabitacionId1] = @p9, [HabitacionNumero] = @p10, [Importe] = @p11, [MotivoCancelacion] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-07-02 15:34:53.874 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 15:34:53.877 -04:00 [INF] Traza registrada: Cancelación en Reservas (ID: 2)
2025-07-02 15:34:53.898 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 15:34:53.899 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CancelarReserva (HostalIslaAzul) in 170.4721ms
2025-07-02 15:34:53.900 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CancelarReserva (HostalIslaAzul)'
2025-07-02 15:34:53.900 -04:00 [INF] HTTP POST /api/Reservas/2/cancelar responded 204 in 197.6188 ms
2025-07-02 15:34:53.902 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/2/cancelar - 204 null null 203.6892ms
2025-07-02 15:42:12.598 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/2 - application/json 140
2025-07-02 15:42:12.625 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 15:42:12.668 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:42:13.449 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 15:42:13.453 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:42:13.455 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 784.6699ms
2025-07-02 15:42:13.458 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 15:42:13.459 -04:00 [INF] HTTP PUT /api/Reservas/2 responded 400 in 834.3687 ms
2025-07-02 15:42:13.460 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/2 - 400 null text/plain; charset=utf-8 862.3975ms
2025-07-02 15:42:24.189 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/2 - application/json 140
2025-07-02 15:42:24.190 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 15:42:24.191 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:42:24.202 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 15:42:24.212 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:42:24.246 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:42:24.269 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p13='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [ClienteId1] = @p1, [EstaCancelada] = @p2, [EstaElClienteEnHostal] = @p3, [FechaCancelacion] = @p4, [FechaEntrada] = @p5, [FechaReservacion] = @p6, [FechaSalida] = @p7, [HabitacionId] = @p8, [HabitacionId1] = @p9, [HabitacionNumero] = @p10, [Importe] = @p11, [MotivoCancelacion] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-07-02 15:42:24.278 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 15:42:24.280 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 2)
2025-07-02 15:42:24.282 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 15:42:24.286 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 94.967ms
2025-07-02 15:42:24.287 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 15:42:24.288 -04:00 [INF] HTTP PUT /api/Reservas/2 responded 200 in 98.4069 ms
2025-07-02 15:42:24.290 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/2 - 200 null application/json; charset=utf-8 101.314ms
2025-07-02 15:47:57.224 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - null null
2025-07-02 15:47:57.231 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 15:47:57.263 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:47:58.043 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 15:47:58.045 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 15:47:58.046 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 763.8766ms
2025-07-02 15:47:58.047 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 15:47:58.047 -04:00 [INF] HTTP GET /api/Reservas/2 responded 200 in 817.2660 ms
2025-07-02 15:47:58.049 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - 200 null application/json; charset=utf-8 825.1042ms
2025-07-02 15:48:06.038 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/3 - null null
2025-07-02 15:48:06.040 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 15:48:06.041 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:48:06.053 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 15:48:06.064 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 15:48:06.067 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 25.0798ms
2025-07-02 15:48:06.070 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 15:48:06.072 -04:00 [INF] HTTP GET /api/Reservas/3 responded 200 in 32.0081 ms
2025-07-02 15:48:06.084 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/3 - 200 null application/json; charset=utf-8 45.3902ms
2025-07-02 15:48:21.235 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - null null
2025-07-02 15:48:21.237 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 15:48:21.239 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:48:21.251 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 15:48:21.253 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 15:48:21.254 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 13.0191ms
2025-07-02 15:48:21.255 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 15:48:21.256 -04:00 [INF] HTTP GET /api/Reservas/2 responded 200 in 18.8878 ms
2025-07-02 15:48:21.257 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/2 - 200 null application/json; charset=utf-8 21.963ms
2025-07-02 15:53:05.560 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:53:05.568 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:53:05.571 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:53:05.587 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:53:05.606 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:53:05.613 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:53:05.614 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 41.767ms
2025-07-02 15:53:05.615 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:53:05.615 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 48.0120 ms
2025-07-02 15:53:05.616 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 56.1349ms
2025-07-02 15:54:59.593 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:54:59.595 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:54:59.596 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:54:59.607 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:54:59.609 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:54:59.610 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 13.4979ms
2025-07-02 15:54:59.612 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:54:59.613 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 18.2593 ms
2025-07-02 15:54:59.614 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 21.1355ms
2025-07-02 15:55:39.594 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:55:39.598 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:55:39.601 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:55:39.611 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:55:39.625 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:55:39.630 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:55:39.634 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 30.9469ms
2025-07-02 15:55:39.640 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:55:39.646 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 48.5823 ms
2025-07-02 15:55:39.656 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 61.4314ms
2025-07-02 15:55:56.649 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:55:56.651 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:55:56.651 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:55:56.663 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:55:56.671 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:55:56.673 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:55:56.673 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 20.5992ms
2025-07-02 15:55:56.674 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:55:56.674 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 23.6222 ms
2025-07-02 15:55:56.675 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 25.78ms
2025-07-02 15:56:11.943 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:56:11.947 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:56:11.952 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:56:11.972 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:56:11.980 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:56:11.984 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:56:11.993 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 35.4747ms
2025-07-02 15:56:11.995 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:56:11.997 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 49.5367 ms
2025-07-02 15:56:12.000 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 56.9841ms
2025-07-02 15:56:22.741 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:56:22.743 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:56:22.744 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:56:22.757 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:56:22.777 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:56:22.792 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 15:56:22.808 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reservas] ([ClienteId], [ClienteId1], [EstaCancelada], [EstaElClienteEnHostal], [FechaCancelacion], [FechaEntrada], [FechaReservacion], [FechaSalida], [HabitacionId], [HabitacionId1], [HabitacionNumero], [Importe], [MotivoCancelacion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-02 15:56:22.820 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 15:56:22.821 -04:00 [INF] Traza registrada: Creación en Reservas (ID: 4)
2025-07-02 15:56:22.823 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 15:56:22.830 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 84.7833ms
2025-07-02 15:56:22.831 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:56:22.833 -04:00 [INF] HTTP POST /api/Reservas responded 201 in 89.8910 ms
2025-07-02 15:56:22.835 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 201 null application/json; charset=utf-8 93.8828ms
2025-07-02 15:56:53.667 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:56:53.670 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:56:53.671 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:56:53.681 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:56:53.697 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:56:53.701 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:56:53.702 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 30.6318ms
2025-07-02 15:56:53.704 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:56:53.705 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 34.9471 ms
2025-07-02 15:56:53.707 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 39.4927ms
2025-07-02 15:57:15.441 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:57:15.447 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:57:15.447 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:57:15.475 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:57:15.487 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:57:15.488 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:57:15.489 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 40.7826ms
2025-07-02 15:57:15.490 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:57:15.492 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 45.0512 ms
2025-07-02 15:57:15.493 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 51.8163ms
2025-07-02 15:57:27.466 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:57:27.472 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:57:27.474 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:57:27.482 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:57:27.489 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:57:27.490 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:57:27.492 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 15.8448ms
2025-07-02 15:57:27.493 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:57:27.506 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 34.3617 ms
2025-07-02 15:57:27.507 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 40.927ms
2025-07-02 15:57:45.178 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:57:45.181 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:57:45.183 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:57:45.192 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:57:45.198 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:57:45.207 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:57:45.224 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 40.2522ms
2025-07-02 15:57:45.228 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:57:45.238 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 56.6331 ms
2025-07-02 15:57:45.247 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 68.9363ms
2025-07-02 15:59:26.593 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones - null null
2025-07-02 15:59:26.594 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 15:59:26.594 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 15:59:26.612 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 15:59:26.614 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 15:59:26.615 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 19.9257ms
2025-07-02 15:59:26.616 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 15:59:26.616 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 22.5364 ms
2025-07-02 15:59:26.617 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones - 200 null application/json; charset=utf-8 24.4445ms
2025-07-02 15:59:42.913 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 15:59:42.919 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:59:42.922 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 15:59:42.935 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 15:59:42.953 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 15:59:42.957 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 15:59:42.961 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 33.5966ms
2025-07-02 15:59:42.962 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 15:59:42.964 -04:00 [INF] HTTP POST /api/Reservas responded 400 in 45.8467 ms
2025-07-02 15:59:42.967 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 400 null text/plain; charset=utf-8 54.036ms
2025-07-02 16:02:24.760 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 140
2025-07-02 16:02:24.761 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 16:02:24.762 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:02:24.779 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 16:02:24.787 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 16:02:24.798 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 16:02:24.812 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reservas] ([ClienteId], [ClienteId1], [EstaCancelada], [EstaElClienteEnHostal], [FechaCancelacion], [FechaEntrada], [FechaReservacion], [FechaSalida], [HabitacionId], [HabitacionId1], [HabitacionNumero], [Importe], [MotivoCancelacion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-02 16:02:24.821 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 16:02:24.827 -04:00 [INF] Traza registrada: Creación en Reservas (ID: 5)
2025-07-02 16:02:24.828 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 16:02:24.832 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 69.5577ms
2025-07-02 16:02:24.833 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 16:02:24.836 -04:00 [INF] HTTP POST /api/Reservas responded 201 in 75.1589 ms
2025-07-02 16:02:24.843 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 201 null application/json; charset=utf-8 80.1184ms
2025-07-02 16:03:48.205 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - null null
2025-07-02 16:03:48.207 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:03:48.207 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:03:48.214 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:03:48.215 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:03:48.216 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 8.0678ms
2025-07-02 16:03:48.216 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:03:48.217 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 10.2596 ms
2025-07-02 16:03:48.217 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - 200 null application/json; charset=utf-8 12.1133ms
2025-07-02 16:04:30.351 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-02T19%3A28%3A12.568Z - null null
2025-07-02 16:04:30.352 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:04:30.353 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:04:30.386 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:04:30.392 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:04:30.396 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 42.6067ms
2025-07-02 16:04:30.398 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:04:30.399 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 47.2735 ms
2025-07-02 16:04:30.402 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-02T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 50.9717ms
2025-07-02 16:04:48.843 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-04T19%3A28%3A12.568Z - null null
2025-07-02 16:04:48.849 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:04:48.850 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:04:48.867 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:04:48.870 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:04:48.876 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 24.3804ms
2025-07-02 16:04:48.883 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:04:48.888 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 39.3426 ms
2025-07-02 16:04:48.893 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-04T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 48.9553ms
2025-07-02 16:04:58.229 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-05T19%3A28%3A12.568Z - null null
2025-07-02 16:04:58.234 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:04:58.235 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:04:58.246 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:04:58.248 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:04:58.250 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 13.2634ms
2025-07-02 16:04:58.250 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:04:58.251 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 16.8487 ms
2025-07-02 16:04:58.256 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-05T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 26.2619ms
2025-07-02 16:05:10.883 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-10T19%3A28%3A12.568Z - null null
2025-07-02 16:05:10.886 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:10.888 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:05:10.909 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:05:10.912 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:05:10.913 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 15.5559ms
2025-07-02 16:05:10.914 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:10.915 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 29.6440 ms
2025-07-02 16:05:10.918 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-10T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 34.8844ms
2025-07-02 16:05:23.562 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-04T19%3A28%3A12.568Z - null null
2025-07-02 16:05:23.564 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:23.565 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:05:23.575 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:05:23.579 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:05:23.582 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 15.9294ms
2025-07-02 16:05:23.585 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:23.586 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 21.2492 ms
2025-07-02 16:05:23.590 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-04T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 28.1548ms
2025-07-02 16:05:34.125 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-02T19%3A28%3A12.568Z - null null
2025-07-02 16:05:34.132 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:34.133 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:05:34.152 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:05:34.156 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:05:34.158 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 21.7984ms
2025-07-02 16:05:34.165 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:34.166 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 34.1872 ms
2025-07-02 16:05:34.167 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-02T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 42.4151ms
2025-07-02 16:05:46.730 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-10T19%3A28%3A12.568Z - null null
2025-07-02 16:05:46.733 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:46.739 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:05:46.748 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:05:46.752 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:05:46.756 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 15.6024ms
2025-07-02 16:05:46.757 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:46.758 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 25.6129 ms
2025-07-02 16:05:46.760 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-10T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 30.3864ms
2025-07-02 16:05:54.642 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-11T19%3A28%3A12.568Z - null null
2025-07-02 16:05:54.643 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:54.644 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:05:54.651 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:05:54.653 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:05:54.654 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 9.9714ms
2025-07-02 16:05:54.655 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:05:54.655 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 12.5342 ms
2025-07-02 16:05:54.656 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-11T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 14.8075ms
2025-07-02 16:06:13.094 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-15T19%3A28%3A12.568Z - null null
2025-07-02 16:06:13.096 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:06:13.097 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:06:13.104 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:06:13.107 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:06:13.108 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 10.2907ms
2025-07-02 16:06:13.111 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:06:13.112 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 15.4614 ms
2025-07-02 16:06:13.113 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-15T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 18.6557ms
2025-07-02 16:06:28.813 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-14T19%3A28%3A12.568Z - null null
2025-07-02 16:06:28.814 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:06:28.815 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:06:28.826 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__fecha_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__fecha_0 AND [r].[FechaSalida] >= @__fecha_0
2025-07-02 16:06:28.827 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:06:28.835 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 19.5724ms
2025-07-02 16:06:28.840 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 16:06:28.841 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 27.0996 ms
2025-07-02 16:06:28.843 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-14T19%3A28%3A12.568Z - 200 null application/json; charset=utf-8 30.2273ms
2025-07-02 16:07:07.458 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/3/registrar-llegada - null 0
2025-07-02 16:07:07.465 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 16:07:07.467 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:07:07.481 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[ClienteId1], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionId1], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 16:07:07.484 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 16:07:07.487 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 17.701ms
2025-07-02 16:07:07.489 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 16:07:07.491 -04:00 [INF] HTTP POST /api/Reservas/3/registrar-llegada responded 400 in 26.3792 ms
2025-07-02 16:07:07.495 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/3/registrar-llegada - 400 null text/plain; charset=utf-8 36.8047ms
2025-07-02 16:12:47.998 -04:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5014/api/Clientes/1 - null null
2025-07-02 16:12:48.001 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.EliminarCliente (HostalIslaAzul)'
2025-07-02 16:12:48.024 -04:00 [INF] Route matched with {action = "EliminarCliente", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarCliente(Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:12:48.751 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 16:12:48.771 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__id_0 AND [r].[EstaCancelada] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 16:12:48.773 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 16:12:48.775 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.EliminarCliente (HostalIslaAzul) in 748.8427ms
2025-07-02 16:12:48.777 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.EliminarCliente (HostalIslaAzul)'
2025-07-02 16:12:48.780 -04:00 [INF] HTTP DELETE /api/Clientes/1 responded 400 in 779.1126 ms
2025-07-02 16:12:48.782 -04:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5014/api/Clientes/1 - 400 null text/plain; charset=utf-8 783.1829ms
2025-07-02 16:13:11.672 -04:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5014/api/Clientes/2 - null null
2025-07-02 16:13:11.673 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.EliminarCliente (HostalIslaAzul)'
2025-07-02 16:13:11.676 -04:00 [INF] Route matched with {action = "EliminarCliente", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EliminarCliente(Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:13:11.684 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 16:13:11.692 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__id_0 AND [r].[EstaCancelada] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 16:13:11.752 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Clientes]
OUTPUT 1
WHERE [Id] = @p0;
2025-07-02 16:13:11.775 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 16:13:11.778 -04:00 [INF] Traza registrada: Eliminación en Clientes (ID: 2)
2025-07-02 16:13:11.780 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 16:13:11.781 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.EliminarCliente (HostalIslaAzul) in 103.9782ms
2025-07-02 16:13:11.782 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.EliminarCliente (HostalIslaAzul)'
2025-07-02 16:13:11.783 -04:00 [INF] HTTP DELETE /api/Clientes/2 responded 204 in 110.3138 ms
2025-07-02 16:13:11.785 -04:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5014/api/Clientes/2 - 204 null null 113.0116ms
2025-07-02 16:13:26.433 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - null null
2025-07-02 16:13:26.436 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:13:26.458 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:13:26.507 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
ORDER BY [c].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 16:13:26.511 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:13:26.518 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 57.6243ms
2025-07-02 16:13:26.519 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:13:26.521 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 85.2771 ms
2025-07-02 16:13:26.524 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 90.8789ms
2025-07-02 16:14:52.869 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Clientes - application/json 118
2025-07-02 16:14:52.874 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.CrearCliente (HostalIslaAzul)'
2025-07-02 16:14:52.896 -04:00 [INF] Route matched with {action = "CrearCliente", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearCliente(HostalIslaAzul.Application.Services.ClienteDto) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:14:52.955 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__dto_CI_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clientes] AS [c]
        WHERE [c].[CI] = @__dto_CI_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 16:14:52.990 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Clientes] ([CI], [EsVip], [NombreApellidos], [NumeroTelefonico])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-07-02 16:14:53.015 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 16:14:53.018 -04:00 [INF] Traza registrada: Creación en Clientes (ID: 1002)
2025-07-02 16:14:53.023 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Cliente'.
2025-07-02 16:14:53.026 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.CrearCliente (HostalIslaAzul) in 128.4742ms
2025-07-02 16:14:53.028 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.CrearCliente (HostalIslaAzul)'
2025-07-02 16:14:53.029 -04:00 [INF] HTTP POST /api/Clientes responded 201 in 155.0604 ms
2025-07-02 16:14:53.031 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Clientes - 201 null application/json; charset=utf-8 161.9879ms
2025-07-02 16:15:16.371 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - null null
2025-07-02 16:15:16.376 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:15:16.378 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:15:16.393 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
ORDER BY [c].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 16:15:16.401 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:15:16.402 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 22.86ms
2025-07-02 16:15:16.405 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:15:16.407 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 30.9770 ms
2025-07-02 16:15:16.409 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 37.4827ms
2025-07-02 16:16:49.059 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Clientes - application/json 120
2025-07-02 16:16:49.061 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.CrearCliente (HostalIslaAzul)'
2025-07-02 16:16:49.061 -04:00 [INF] Route matched with {action = "CrearCliente", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearCliente(HostalIslaAzul.Application.Services.ClienteDto) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:16:49.071 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_CI_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Clientes] AS [c]
        WHERE [c].[CI] = @__dto_CI_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 16:16:49.080 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Clientes] ([CI], [EsVip], [NombreApellidos], [NumeroTelefonico])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-07-02 16:16:49.091 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 16:16:49.093 -04:00 [INF] Traza registrada: Creación en Clientes (ID: 1003)
2025-07-02 16:16:49.094 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Cliente'.
2025-07-02 16:16:49.096 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.CrearCliente (HostalIslaAzul) in 33.6457ms
2025-07-02 16:16:49.097 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.CrearCliente (HostalIslaAzul)'
2025-07-02 16:16:49.098 -04:00 [INF] HTTP POST /api/Clientes responded 201 in 37.4774 ms
2025-07-02 16:16:49.099 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Clientes - 201 null application/json; charset=utf-8 39.2535ms
2025-07-02 16:17:35.677 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas - application/json 143
2025-07-02 16:17:35.679 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 16:17:35.679 -04:00 [INF] Route matched with {action = "CrearReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CrearReserva(HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 16:17:35.684 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 16:17:35.697 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__dto_FechaSalida_1='?' (DbType = DateTime2), @__dto_FechaEntrada_2='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_1 AND [r].[FechaSalida] >= @__dto_FechaEntrada_2) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 16:17:35.704 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 16:17:35.719 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Size = 4000), @p11='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p12='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reservas] ([ClienteId], [ClienteId1], [EstaCancelada], [EstaElClienteEnHostal], [FechaCancelacion], [FechaEntrada], [FechaReservacion], [FechaSalida], [HabitacionId], [HabitacionId1], [HabitacionNumero], [Importe], [MotivoCancelacion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-02 16:17:35.728 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 16:17:35.730 -04:00 [INF] Traza registrada: Creación en Reservas (ID: 6)
2025-07-02 16:17:35.734 -04:00 [INF] Executing CreatedAtActionResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 16:17:35.738 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul) in 58.3159ms
2025-07-02 16:17:35.742 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CrearReserva (HostalIslaAzul)'
2025-07-02 16:17:35.745 -04:00 [INF] HTTP POST /api/Reservas responded 201 in 66.2812 ms
2025-07-02 16:17:35.747 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas - 201 null application/json; charset=utf-8 70.3275ms
2025-07-02 16:25:06.174 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?busqueda=85021508281&pagina=1&tamanoPagina=10 - null null
2025-07-02 16:25:06.176 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:25:06.184 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:25:07.222 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__busqueda_0_contains='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE LOWER([c].[NombreApellidos]) LIKE @__busqueda_0_contains ESCAPE N'\' OR LOWER([c].[CI]) LIKE @__busqueda_0_contains ESCAPE N'\' OR LOWER([c].[NumeroTelefonico]) LIKE @__busqueda_0_contains ESCAPE N'\'
ORDER BY [c].[NombreApellidos]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-02 16:25:07.224 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:25:07.226 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 1041.3523ms
2025-07-02 16:25:07.228 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:25:07.229 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 1052.5472 ms
2025-07-02 16:25:07.236 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?busqueda=85021508281&pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 1062.722ms
2025-07-02 16:25:18.960 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?ciFiltro=85021508281&pagina=1&tamanoPagina=10 - null null
2025-07-02 16:25:18.964 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:25:18.966 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:25:18.993 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ciFiltro_0='?' (Size = 4000), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[CI] = @__ciFiltro_0
ORDER BY [c].[NombreApellidos]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-02 16:25:18.996 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:25:18.999 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 30.235ms
2025-07-02 16:25:19.000 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:25:19.001 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 37.2050 ms
2025-07-02 16:25:19.011 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?ciFiltro=85021508281&pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 51.0609ms
2025-07-02 16:29:49.980 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=20 - null null
2025-07-02 16:29:49.982 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:29:49.984 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 16:29:50.056 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
ORDER BY [c].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 16:29:50.057 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:29:50.061 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 73.7321ms
2025-07-02 16:29:50.062 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 16:29:50.063 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 80.9520 ms
2025-07-02 16:29:50.065 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 84.8252ms
2025-07-02 16:33:11.329 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves?pagina=1&tamanoPagina=10 - null null
2025-07-02 16:33:11.332 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul)'
2025-07-02 16:33:11.366 -04:00 [INF] Route matched with {action = "ListarAmasDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarAmasDeLlaves(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 16:33:11.420 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
ORDER BY [a].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 16:33:11.473 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.AmaDeLlaves, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 16:33:11.482 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul) in 114.1632ms
2025-07-02 16:33:11.483 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul)'
2025-07-02 16:33:11.484 -04:00 [INF] HTTP GET /api/AmasDeLlaves responded 200 in 151.2608 ms
2025-07-02 16:33:11.490 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 160.4989ms
2025-07-02 16:43:42.940 -04:00 [INF] Application is shutting down...
2025-07-02 16:44:32.485 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 16:44:33.366 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 16:45:26.739 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 16:45:29.135 -04:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 16:45:29.286 -04:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 16:45:29.306 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 16:45:29.324 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 16:45:29.434 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-02 16:45:29.519 -04:00 [INF] Applying migration '20250702204435_UpdateReservaWithHabitacionId'.
2025-07-02 16:45:29.827 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Reservas] DROP CONSTRAINT [FK_Reservas_Clientes_ClienteId1];
2025-07-02 16:45:29.836 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Reservas] DROP CONSTRAINT [FK_Reservas_Habitaciones_HabitacionId1];
2025-07-02 16:45:29.842 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Reservas_ClienteId1] ON [Reservas];
2025-07-02 16:45:29.849 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_Reservas_HabitacionId1] ON [Reservas];
2025-07-02 16:45:29.918 -04:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Reservas]') AND [c].[name] = N'ClienteId1');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Reservas] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Reservas] DROP COLUMN [ClienteId1];
2025-07-02 16:45:29.990 -04:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Reservas]') AND [c].[name] = N'HabitacionId1');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Reservas] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Reservas] DROP COLUMN [HabitacionId1];
2025-07-02 16:45:30.078 -04:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Reservas]') AND [c].[name] = N'HabitacionNumero');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Reservas] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Reservas] ALTER COLUMN [HabitacionNumero] nvarchar(450) NOT NULL;
2025-07-02 16:45:30.100 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reservas_HabitacionNumero] ON [Reservas] ([HabitacionNumero]);
2025-07-02 16:45:30.108 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250702204435_UpdateReservaWithHabitacionId', N'8.0.10');
2025-07-02 17:50:44.659 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 17:50:45.488 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 17:51:19.557 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 17:51:22.005 -04:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 17:51:22.122 -04:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 17:51:22.131 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-02 17:51:22.138 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-02 17:51:22.222 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-02 17:51:22.289 -04:00 [INF] Applying migration '20250702215047_AddTurnoToHabitacionAmaDeLlaves'.
2025-07-02 17:51:22.525 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HabitacionesAmasDeLlaves] ADD [Turno] nvarchar(max) NOT NULL DEFAULT N'';
2025-07-02 17:51:22.533 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250702215047_AddTurnoToHabitacionAmaDeLlaves', N'8.0.10');
2025-07-02 17:51:59.948 -04:00 [INF] Now listening on: http://localhost:5014
2025-07-02 17:52:00.280 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-02 17:52:00.283 -04:00 [INF] Hosting environment: Development
2025-07-02 17:52:00.284 -04:00 [INF] Content root path: /home/agr/Documentos/HostalIslaAzul
2025-07-02 17:54:17.701 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/index.html - null null
2025-07-02 17:54:18.192 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/index.html - 200 null text/html;charset=utf-8 498.489ms
2025-07-02 17:54:18.938 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/favicon-16x16.png - null null
2025-07-02 17:54:19.070 -04:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-07-02 17:54:19.073 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/favicon-16x16.png - 499 665 image/png 134.9712ms
2025-07-02 17:54:19.291 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - null null
2025-07-02 17:54:19.945 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 653.5095ms
2025-07-02 17:55:45.873 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-por-ama-de-llaves/1 - null null
2025-07-02 17:55:45.918 -04:00 [WRN] Failed to determine the https port for redirect.
2025-07-02 17:55:45.986 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul)'
2025-07-02 17:55:46.129 -04:00 [INF] Route matched with {action = "ObtenerHabitacionesPorAmaDeLlaves", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacionesPorAmaDeLlaves(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 17:55:49.314 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 17:55:53.070 -04:00 [INF] Executed DbCommand (194ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 17:55:53.578 -04:00 [INF] Executed DbCommand (34ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HabitacionNumero]
FROM [HabitacionesAmasDeLlaves] AS [h]
WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0
2025-07-02 17:55:53.648 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-02 17:55:53.739 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul) in 7569.7256ms
2025-07-02 17:55:53.744 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul)'
2025-07-02 17:55:53.761 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-por-ama-de-llaves/1 responded 200 in 7850.6737 ms
2025-07-02 17:55:53.817 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-por-ama-de-llaves/1 - 200 null application/json; charset=utf-8 7943.4791ms
2025-07-02 17:57:01.267 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves?pagina=1&tamanoPagina=10 - null null
2025-07-02 17:57:01.273 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul)'
2025-07-02 17:57:01.302 -04:00 [INF] Route matched with {action = "ListarAmasDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarAmasDeLlaves(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 17:57:01.531 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
ORDER BY [a].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 17:57:01.546 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.AmaDeLlaves, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 17:57:01.692 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul) in 389.425ms
2025-07-02 17:57:01.694 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ListarAmasDeLlaves (HostalIslaAzul)'
2025-07-02 17:57:01.695 -04:00 [INF] HTTP GET /api/AmasDeLlaves responded 200 in 422.4111 ms
2025-07-02 17:57:01.699 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 431.2885ms
2025-07-02 17:57:17.162 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves/2 - null null
2025-07-02 17:57:17.164 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ObtenerAmaDeLlaves (HostalIslaAzul)'
2025-07-02 17:57:17.197 -04:00 [INF] Route matched with {action = "ObtenerAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerAmaDeLlaves(Int32) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 17:57:17.580 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 17:57:17.584 -04:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-07-02 17:57:17.586 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.ObtenerAmaDeLlaves (HostalIslaAzul) in 386.1346ms
2025-07-02 17:57:17.587 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ObtenerAmaDeLlaves (HostalIslaAzul)'
2025-07-02 17:57:17.588 -04:00 [INF] HTTP GET /api/AmasDeLlaves/2 responded 404 in 423.6153 ms
2025-07-02 17:57:17.589 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves/2 - 404 null text/plain; charset=utf-8 426.9592ms
2025-07-02 17:57:25.802 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves/1 - null null
2025-07-02 17:57:25.805 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ObtenerAmaDeLlaves (HostalIslaAzul)'
2025-07-02 17:57:25.805 -04:00 [INF] Route matched with {action = "ObtenerAmaDeLlaves", controller = "AmasDeLlaves"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerAmaDeLlaves(Int32) on controller HostalIslaAzul.Controllers.AmasDeLlavesController (HostalIslaAzul).
2025-07-02 17:57:25.820 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 17:57:25.825 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.AmaDeLlaves'.
2025-07-02 17:57:25.828 -04:00 [INF] Executed action HostalIslaAzul.Controllers.AmasDeLlavesController.ObtenerAmaDeLlaves (HostalIslaAzul) in 22.0294ms
2025-07-02 17:57:25.829 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.AmasDeLlavesController.ObtenerAmaDeLlaves (HostalIslaAzul)'
2025-07-02 17:57:25.830 -04:00 [INF] HTTP GET /api/AmasDeLlaves/1 responded 200 in 25.6115 ms
2025-07-02 17:57:25.844 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/AmasDeLlaves/1 - 200 null application/json; charset=utf-8 29.388ms
2025-07-02 17:57:41.976 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - null null
2025-07-02 17:57:41.979 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 17:57:42.004 -04:00 [INF] Route matched with {action = "ListarClientes", controller = "Clientes"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarClientes(System.String, System.String, Int32, Int32) on controller HostalIslaAzul.Controllers.ClientesController (HostalIslaAzul).
2025-07-02 17:57:42.117 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
ORDER BY [c].[NombreApellidos]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 17:57:42.242 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Cliente, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 17:57:42.266 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul) in 253.2809ms
2025-07-02 17:57:42.267 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ClientesController.ListarClientes (HostalIslaAzul)'
2025-07-02 17:57:42.268 -04:00 [INF] HTTP GET /api/Clientes responded 200 in 288.9583 ms
2025-07-02 17:57:42.272 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Clientes?pagina=1&tamanoPagina=10 - 200 null application/json; charset=utf-8 294.3034ms
2025-07-02 17:58:12.278 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Habitaciones/1/fuera-de-servicio - null 0
2025-07-02 17:58:12.281 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul)'
2025-07-02 17:58:12.304 -04:00 [INF] Route matched with {action = "PonerFueraDeServicio", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PonerFueraDeServicio(Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 17:58:12.377 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Id] = @__p_0
2025-07-02 17:58:12.552 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__habitacion_Numero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionNumero] = @__habitacion_Numero_0 AND [r].[EstaCancelada] = CAST(0 AS bit)) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 17:58:12.960 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Boolean), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Habitaciones] SET [EstaFueraDeServicio] = @p0, [Numero] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-07-02 17:58:13.316 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 17:58:13.405 -04:00 [INF] Traza registrada: Fuera de servicio en Habitaciones (ID: 1)
2025-07-02 17:58:13.434 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 17:58:13.435 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul) in 1130.0204ms
2025-07-02 17:58:13.436 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.PonerFueraDeServicio (HostalIslaAzul)'
2025-07-02 17:58:13.437 -04:00 [INF] HTTP POST /api/Habitaciones/1/fuera-de-servicio responded 204 in 1156.0851 ms
2025-07-02 17:58:13.439 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Habitaciones/1/fuera-de-servicio - 204 null null 1160.7986ms
2025-07-02 17:58:47.172 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones?estaFueraDeServicio=true&pagina=1&tamanoPagina=20 - null null
2025-07-02 17:58:47.180 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 17:58:47.214 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 17:58:47.321 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[@__estaFueraDeServicio_Value_0='?' (DbType = Boolean), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[EstaFueraDeServicio] = @__estaFueraDeServicio_Value_0
ORDER BY [h].[Numero]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-07-02 17:58:47.333 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 17:58:47.356 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 135.9951ms
2025-07-02 17:58:47.358 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 17:58:47.370 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 190.3971 ms
2025-07-02 17:58:47.378 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones?estaFueraDeServicio=true&pagina=1&tamanoPagina=20 - 200 null application/json; charset=utf-8 206.1333ms
2025-07-02 18:00:29.853 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/2/registrar-llegada - null 0
2025-07-02 18:00:29.872 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:00:29.901 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:00:30.253 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 18:00:30.261 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 18:00:30.262 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 339.0479ms
2025-07-02 18:00:30.268 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:00:30.270 -04:00 [INF] HTTP POST /api/Reservas/2/registrar-llegada responded 400 in 398.4020 ms
2025-07-02 18:00:30.273 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/2/registrar-llegada - 400 null text/plain; charset=utf-8 420.1372ms
2025-07-02 18:00:38.336 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/3/registrar-llegada - null 0
2025-07-02 18:00:38.341 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:00:38.342 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:00:38.362 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 18:00:38.743 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 18:00:38.800 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 18:00:38.803 -04:00 [INF] Traza registrada: Registro de llegada en Reservas (ID: 3)
2025-07-02 18:00:38.804 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 18:00:38.805 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 461.4452ms
2025-07-02 18:00:38.806 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:00:38.807 -04:00 [INF] HTTP POST /api/Reservas/3/registrar-llegada responded 204 in 466.1088 ms
2025-07-02 18:00:38.809 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/3/registrar-llegada - 204 null null 472.3955ms
2025-07-02 18:01:05.394 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - null null
2025-07-02 18:01:05.402 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 18:01:05.435 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:01:05.606 -04:00 [INF] Executed DbCommand (31ms) [Parameters=[@__fecha_Date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND CONVERT(date, [r].[FechaEntrada]) <= @__fecha_Date_0 AND CONVERT(date, [r].[FechaSalida]) >= @__fecha_Date_0
2025-07-02 18:01:05.612 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 18:01:05.620 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 165.9413ms
2025-07-02 18:01:05.622 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 18:01:05.623 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 220.2290 ms
2025-07-02 18:01:05.624 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - 200 null application/json; charset=utf-8 230.371ms
2025-07-02 18:01:55.659 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/3 - null null
2025-07-02 18:01:55.662 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 18:01:55.690 -04:00 [INF] Route matched with {action = "ObtenerReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReserva(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:01:55.811 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion]
FROM [Reservas] AS [r]
WHERE [r].[Id] = @__p_0
2025-07-02 18:01:55.821 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 18:01:55.869 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul) in 177.6755ms
2025-07-02 18:01:55.871 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReserva (HostalIslaAzul)'
2025-07-02 18:01:55.873 -04:00 [INF] HTTP GET /api/Reservas/3 responded 200 in 211.2121 ms
2025-07-02 18:01:55.880 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/3 - 200 null application/json; charset=utf-8 220.6159ms
2025-07-02 18:19:45.871 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/3 - application/json 140
2025-07-02 18:19:45.874 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:19:45.908 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:19:47.132 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 18:19:47.156 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 18:19:47.158 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 1248.3166ms
2025-07-02 18:19:47.159 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:19:47.160 -04:00 [INF] HTTP PUT /api/Reservas/3 responded 400 in 1286.0375 ms
2025-07-02 18:19:47.161 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/3 - 400 null text/plain; charset=utf-8 1289.7592ms
2025-07-02 18:36:05.437 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 140
2025-07-02 18:36:05.447 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:36:05.449 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:36:06.820 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 18:36:06.854 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 18:36:06.891 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:36:06.937 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:36:07.015 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 18:36:07.023 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 18:36:07.025 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 4)
2025-07-02 18:36:07.027 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 18:36:07.047 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 1597.0783ms
2025-07-02 18:36:07.048 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:36:07.049 -04:00 [ERR] HTTP PUT /api/Reservas/4 responded 500 in 1602.4896 ms
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-02 18:36:07.121 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-02 18:36:07.155 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 500 null text/plain; charset=utf-8 1717.7345ms
2025-07-02 18:40:07.127 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Habitaciones - null null
2025-07-02 18:40:07.140 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 18:40:07.145 -04:00 [INF] Route matched with {action = "ListarHabitaciones", controller = "Habitaciones"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ListarHabitaciones(System.String, System.Nullable`1[System.Boolean], Int32, Int32) on controller HostalIslaAzul.Controllers.HabitacionesController (HostalIslaAzul).
2025-07-02 18:40:07.188 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
ORDER BY [h].[Numero]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-07-02 18:40:07.267 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Domain.Entities.Habitacion, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 18:40:07.284 -04:00 [INF] Executed action HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul) in 133.8091ms
2025-07-02 18:40:07.289 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.HabitacionesController.ListarHabitaciones (HostalIslaAzul)'
2025-07-02 18:40:07.292 -04:00 [INF] HTTP GET /api/Habitaciones responded 200 in 151.2679 ms
2025-07-02 18:40:07.296 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Habitaciones - 200 null application/json; charset=utf-8 168.9038ms
2025-07-02 18:53:47.198 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/5 - application/json 143
2025-07-02 18:53:47.201 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:53:47.203 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:53:48.159 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 18:53:48.171 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 18:53:48.184 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:53:48.201 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:53:48.230 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 18:53:48.262 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 18:53:48.278 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 18:53:48.293 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 5)
2025-07-02 18:53:48.295 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 18:53:48.299 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 1095.4495ms
2025-07-02 18:53:48.301 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:53:48.303 -04:00 [ERR] HTTP PUT /api/Reservas/5 responded 500 in 1101.5824 ms
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-02 18:53:48.322 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-02 18:53:48.344 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/5 - 500 null text/plain; charset=utf-8 1145.5275ms
2025-07-02 18:54:35.400 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/5 - application/json 140
2025-07-02 18:54:35.408 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:54:35.410 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:54:35.434 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 18:54:35.446 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 18:54:35.453 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:54:35.469 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:54:35.486 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 18:54:35.510 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 18:54:35.535 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 18:54:35.538 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 5)
2025-07-02 18:54:35.542 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 18:54:35.571 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 159.6433ms
2025-07-02 18:54:35.576 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:54:35.581 -04:00 [ERR] HTTP PUT /api/Reservas/5 responded 500 in 178.1794 ms
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-02 18:54:35.606 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-02 18:54:35.650 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/5 - 500 null text/plain; charset=utf-8 247.9996ms
2025-07-02 18:55:20.604 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/5 - application/json 140
2025-07-02 18:55:20.606 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:55:20.608 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:55:20.622 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 18:55:20.635 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 18:55:20.645 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:55:20.661 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 18:55:20.671 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 18:55:20.683 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 18:55:20.685 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 5)
2025-07-02 18:55:20.686 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 18:55:20.701 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 91.245ms
2025-07-02 18:55:20.703 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 18:55:20.704 -04:00 [ERR] HTTP PUT /api/Reservas/5 responded 500 in 98.0467 ms
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-02 18:55:20.722 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-02 18:55:20.762 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/5 - 500 null text/plain; charset=utf-8 158.33ms
2025-07-02 18:59:03.720 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/registrar-llegada - null 0
2025-07-02 18:59:03.722 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:59:03.723 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:59:03.733 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 18:59:03.736 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 18:59:03.737 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 13.8482ms
2025-07-02 18:59:03.738 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:59:03.739 -04:00 [INF] HTTP POST /api/Reservas/4/registrar-llegada responded 400 in 17.2676 ms
2025-07-02 18:59:03.740 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/registrar-llegada - 400 null text/plain; charset=utf-8 20.199ms
2025-07-02 18:59:31.815 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/registrar-llegada - null 0
2025-07-02 18:59:31.817 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:59:31.818 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 18:59:31.829 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 18:59:31.832 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 18:59:31.853 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 32.87ms
2025-07-02 18:59:31.856 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 18:59:31.857 -04:00 [INF] HTTP POST /api/Reservas/4/registrar-llegada responded 400 in 40.2308 ms
2025-07-02 18:59:31.862 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/registrar-llegada - 400 null text/plain; charset=utf-8 46.5718ms
2025-07-02 19:00:45.640 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 140
2025-07-02 19:00:45.654 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:00:45.655 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:00:45.672 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:00:45.679 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 19:00:45.691 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:00:45.693 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:00:45.693 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 37.8308ms
2025-07-02 19:00:45.694 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:00:45.696 -04:00 [INF] HTTP PUT /api/Reservas/4 responded 400 in 41.5127 ms
2025-07-02 19:00:45.697 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 400 null text/plain; charset=utf-8 56.255ms
2025-07-02 19:02:27.106 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 143
2025-07-02 19:02:27.120 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:02:27.121 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:02:27.147 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:02:27.184 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 19:02:27.191 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:02:27.197 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:02:27.201 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 78.8889ms
2025-07-02 19:02:27.203 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:02:27.205 -04:00 [INF] HTTP PUT /api/Reservas/4 responded 400 in 84.5835 ms
2025-07-02 19:02:27.208 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 400 null text/plain; charset=utf-8 101.9797ms
2025-07-02 19:02:45.060 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 143
2025-07-02 19:02:45.062 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:02:45.063 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:02:45.075 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:02:45.080 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 19:02:45.089 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:02:45.118 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:02:45.139 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 19:02:45.153 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 19:02:45.167 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 19:02:45.171 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 4)
2025-07-02 19:02:45.175 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 19:02:45.182 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 116.1281ms
2025-07-02 19:02:45.184 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:02:45.187 -04:00 [ERR] HTTP PUT /api/Reservas/4 responded 500 in 125.5246 ms
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-02 19:02:45.214 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-02 19:02:45.241 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 500 null text/plain; charset=utf-8 180.3614ms
2025-07-02 19:03:18.423 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 140
2025-07-02 19:03:18.429 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:03:18.432 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:03:18.441 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:03:18.445 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 19:03:18.452 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:03:18.468 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:03:18.471 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:03:18.474 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 40.2464ms
2025-07-02 19:03:18.477 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:03:18.479 -04:00 [INF] HTTP PUT /api/Reservas/4 responded 400 in 50.0095 ms
2025-07-02 19:03:18.483 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 400 null text/plain; charset=utf-8 59.8297ms
2025-07-02 19:03:45.740 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 143
2025-07-02 19:03:45.742 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:03:45.743 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:03:45.750 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:03:45.759 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_HabitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__dto_HabitacionNumero_0
2025-07-02 19:03:45.767 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:03:45.775 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ClienteId_0='?' (DbType = Int32), @__id_1='?' (DbType = Int32), @__dto_FechaSalida_2='?' (DbType = DateTime2), @__dto_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[ClienteId] = @__dto_ClienteId_0 AND [r].[Id] <> @__id_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__dto_FechaSalida_2 AND [r].[FechaSalida] >= @__dto_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:03:45.783 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Clientes] AS [c]
WHERE [c].[Id] = @__p_0
2025-07-02 19:03:45.798 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 19:03:45.808 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 19:03:45.810 -04:00 [INF] Traza registrada: Modificación en Reservas (ID: 4)
2025-07-02 19:03:45.812 -04:00 [INF] Executing OkObjectResult, writing value of type 'HostalIslaAzul.Domain.Entities.Reserva'.
2025-07-02 19:03:45.818 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 73.7577ms
2025-07-02 19:03:45.820 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:03:45.830 -04:00 [ERR] HTTP PUT /api/Reservas/4 responded 500 in 88.2554 ms
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-02 19:03:45.848 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Reservas.Cliente.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(Stream utf8Json, T rootValue, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-02 19:03:45.873 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 500 null text/plain; charset=utf-8 132.8ms
2025-07-02 19:05:22.718 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/registrar-llegada - null 0
2025-07-02 19:05:22.723 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 19:05:22.734 -04:00 [INF] Route matched with {action = "RegistrarLlegada", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegistrarLlegada(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:05:22.743 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 19:05:22.756 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 19:05:22.766 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 19:05:22.778 -04:00 [INF] Traza registrada: Registro de llegada en Reservas (ID: 4)
2025-07-02 19:05:22.780 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 19:05:22.780 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul) in 45.0991ms
2025-07-02 19:05:22.780 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.RegistrarLlegada (HostalIslaAzul)'
2025-07-02 19:05:22.781 -04:00 [INF] HTTP POST /api/Reservas/4/registrar-llegada responded 204 in 57.9343 ms
2025-07-02 19:05:22.782 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/registrar-llegada - 204 null null 64.5238ms
2025-07-02 19:06:30.695 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - application/json 5
2025-07-02 19:06:30.697 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:06:30.718 -04:00 [INF] Route matched with {action = "CambiarHabitacion", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CambiarHabitacion(Int32, System.String) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:06:30.750 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 19:06:30.761 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:06:30.762 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul) in 42.6891ms
2025-07-02 19:06:30.771 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:06:30.775 -04:00 [INF] HTTP POST /api/Reservas/4/cambiar-habitacion responded 400 in 78.8475 ms
2025-07-02 19:06:30.777 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - 400 null text/plain; charset=utf-8 81.2953ms
2025-07-02 19:06:48.342 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - application/json 5
2025-07-02 19:06:48.344 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:06:48.344 -04:00 [INF] Route matched with {action = "CambiarHabitacion", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CambiarHabitacion(Int32, System.String) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:06:48.353 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 19:06:48.385 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__nuevoNumeroHabitacion_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__nuevoNumeroHabitacion_0
2025-07-02 19:06:48.419 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__reservaId_1='?' (DbType = Int32), @__reserva_FechaSalida_2='?' (DbType = DateTime2), @__reserva_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__reservaId_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__reserva_FechaSalida_2 AND [r].[FechaSalida] >= @__reserva_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:06:48.432 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 19:06:48.445 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 19:06:48.450 -04:00 [INF] Traza registrada: Cambio de habitación en Reservas (ID: 4)
2025-07-02 19:06:48.451 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 19:06:48.453 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul) in 107.9377ms
2025-07-02 19:06:48.454 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:06:48.459 -04:00 [INF] HTTP POST /api/Reservas/4/cambiar-habitacion responded 204 in 115.7730 ms
2025-07-02 19:06:48.461 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - 204 null null 118.042ms
2025-07-02 19:09:07.642 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - null null
2025-07-02 19:09:07.643 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 19:09:07.644 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:09:07.657 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__fecha_Date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND CONVERT(date, [r].[FechaEntrada]) <= @__fecha_Date_0 AND CONVERT(date, [r].[FechaSalida]) >= @__fecha_Date_0
2025-07-02 19:09:07.665 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 19:09:07.667 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 22.7799ms
2025-07-02 19:09:07.674 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 19:09:07.674 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 31.3903 ms
2025-07-02 19:09:07.676 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas - 200 null application/json; charset=utf-8 34.5443ms
2025-07-02 19:10:00.015 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-02T22%3A18%3A30.619Z - null null
2025-07-02 19:10:00.018 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 19:10:00.019 -04:00 [INF] Route matched with {action = "ObtenerReservasActivas", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerReservasActivas(System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:10:00.033 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__fecha_Date_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[NombreApellidos] AS [ClienteNombre], [r].[HabitacionNumero]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND CONVERT(date, [r].[FechaEntrada]) <= @__fecha_Date_0 AND CONVERT(date, [r].[FechaSalida]) >= @__fecha_Date_0
2025-07-02 19:10:00.037 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HostalIslaAzul.Application.Services.ReservaActivaDto, HostalIslaAzul, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-02 19:10:00.046 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul) in 26.5846ms
2025-07-02 19:10:00.047 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerReservasActivas (HostalIslaAzul)'
2025-07-02 19:10:00.048 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 29.8513 ms
2025-07-02 19:10:00.049 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/activas?fecha=2025-07-02T22%3A18%3A30.619Z - 200 null application/json; charset=utf-8 34.2098ms
2025-07-02 19:10:20.399 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-por-ama-de-llaves/1 - null null
2025-07-02 19:10:20.412 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul)'
2025-07-02 19:10:20.413 -04:00 [INF] Route matched with {action = "ObtenerHabitacionesPorAmaDeLlaves", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacionesPorAmaDeLlaves(Int32) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:10:20.437 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 19:10:20.445 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[HabitacionNumero]
FROM [HabitacionesAmasDeLlaves] AS [h]
WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0
2025-07-02 19:10:20.446 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-02 19:10:20.448 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul) in 28.4528ms
2025-07-02 19:10:20.448 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesPorAmaDeLlaves (HostalIslaAzul)'
2025-07-02 19:10:20.449 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-por-ama-de-llaves/1 responded 200 in 37.3880 ms
2025-07-02 19:10:20.450 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-por-ama-de-llaves/1 - 200 null application/json; charset=utf-8 51.062ms
2025-07-02 19:11:20.875 -04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-disponibles?fechaInicio=2025-07-02T22%3A18%3A30.619Z&fechaFin=2025-07-04T22%3A18%3A30.619Z - null null
2025-07-02 19:11:20.893 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul)'
2025-07-02 19:11:20.910 -04:00 [INF] Route matched with {action = "ObtenerHabitacionesDisponibles", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObtenerHabitacionesDisponibles(System.DateTime, System.DateTime) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:11:21.008 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__fechaFin_0='?' (DbType = DateTime2), @__fechaInicio_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[HabitacionId]
FROM [Reservas] AS [r]
WHERE [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__fechaFin_0 AND [r].[FechaSalida] >= @__fechaInicio_1
2025-07-02 19:11:21.285 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__habitacionesOcupadas_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[EstaFueraDeServicio] = CAST(0 AS bit) AND [h].[Id] NOT IN (
    SELECT [h0].[value]
    FROM OPENJSON(@__habitacionesOcupadas_0) WITH ([value] int '$') AS [h0]
)
2025-07-02 19:11:21.290 -04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-02 19:11:21.292 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul) in 380.895ms
2025-07-02 19:11:21.293 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ObtenerHabitacionesDisponibles (HostalIslaAzul)'
2025-07-02 19:11:21.294 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-disponibles responded 200 in 401.7220 ms
2025-07-02 19:11:21.297 -04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5014/api/Reservas/habitaciones-disponibles?fechaInicio=2025-07-02T22%3A18%3A30.619Z&fechaFin=2025-07-04T22%3A18%3A30.619Z - 200 null application/json; charset=utf-8 422.3304ms
2025-07-02 19:17:04.946 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 140
2025-07-02 19:17:04.952 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:17:04.958 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:17:05.686 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:17:05.688 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:17:05.691 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 731.0909ms
2025-07-02 19:17:05.694 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:17:05.695 -04:00 [INF] HTTP PUT /api/Reservas/4 responded 400 in 743.6831 ms
2025-07-02 19:17:05.699 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 400 null text/plain; charset=utf-8 753.2106ms
2025-07-02 19:17:38.585 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 143
2025-07-02 19:17:38.587 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:17:38.589 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:17:38.596 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:17:38.599 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:17:38.601 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 10.4665ms
2025-07-02 19:17:38.603 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:17:38.605 -04:00 [INF] HTTP PUT /api/Reservas/4 responded 400 in 17.1730 ms
2025-07-02 19:17:38.607 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 400 null text/plain; charset=utf-8 21.6123ms
2025-07-02 19:17:59.448 -04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - application/json 143
2025-07-02 19:17:59.457 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:17:59.460 -04:00 [INF] Route matched with {action = "ModificarReserva", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ModificarReserva(Int32, HostalIslaAzul.Application.Services.ReservaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:17:59.467 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__id_0
2025-07-02 19:17:59.472 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:17:59.474 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul) in 12.9133ms
2025-07-02 19:17:59.478 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.ModificarReserva (HostalIslaAzul)'
2025-07-02 19:17:59.479 -04:00 [INF] HTTP PUT /api/Reservas/4 responded 400 in 21.9587 ms
2025-07-02 19:17:59.481 -04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5014/api/Reservas/4 - 400 null text/plain; charset=utf-8 33.1975ms
2025-07-02 19:18:27.405 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - application/json 5
2025-07-02 19:18:27.408 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:18:27.410 -04:00 [INF] Route matched with {action = "CambiarHabitacion", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CambiarHabitacion(Int32, System.String) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:18:27.431 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 19:18:27.439 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__nuevoNumeroHabitacion_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__nuevoNumeroHabitacion_0
2025-07-02 19:18:27.448 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__reservaId_1='?' (DbType = Int32), @__reserva_FechaSalida_2='?' (DbType = DateTime2), @__reserva_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__reservaId_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__reserva_FechaSalida_2 AND [r].[FechaSalida] >= @__reserva_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:18:27.487 -04:00 [INF] Executed DbCommand (34ms) [Parameters=[@p11='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Boolean), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (Size = 450), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Reservas] SET [ClienteId] = @p0, [EstaCancelada] = @p1, [EstaElClienteEnHostal] = @p2, [FechaCancelacion] = @p3, [FechaEntrada] = @p4, [FechaReservacion] = @p5, [FechaSalida] = @p6, [HabitacionId] = @p7, [HabitacionNumero] = @p8, [Importe] = @p9, [MotivoCancelacion] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-07-02 19:18:27.497 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Trazas] ([Detalles], [Fecha], [Operacion], [RegistroId], [TablaAfectada])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-02 19:18:27.499 -04:00 [INF] Traza registrada: Cambio de habitación en Reservas (ID: 4)
2025-07-02 19:18:27.501 -04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-07-02 19:18:27.503 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul) in 86.7495ms
2025-07-02 19:18:27.505 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:18:27.507 -04:00 [INF] HTTP POST /api/Reservas/4/cambiar-habitacion responded 204 in 98.9480 ms
2025-07-02 19:18:27.509 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - 204 null null 103.8235ms
2025-07-02 19:19:10.113 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - application/json 5
2025-07-02 19:19:10.116 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:19:10.116 -04:00 [INF] Route matched with {action = "CambiarHabitacion", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CambiarHabitacion(Int32, System.String) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:19:10.125 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__reservaId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ClienteId], [r].[EstaCancelada], [r].[EstaElClienteEnHostal], [r].[FechaCancelacion], [r].[FechaEntrada], [r].[FechaReservacion], [r].[FechaSalida], [r].[HabitacionId], [r].[HabitacionNumero], [r].[Importe], [r].[MotivoCancelacion], [c].[Id], [c].[CI], [c].[EsVip], [c].[NombreApellidos], [c].[NumeroTelefonico]
FROM [Reservas] AS [r]
INNER JOIN [Clientes] AS [c] ON [r].[ClienteId] = [c].[Id]
WHERE [r].[Id] = @__reservaId_0
2025-07-02 19:19:10.129 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__nuevoNumeroHabitacion_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__nuevoNumeroHabitacion_0
2025-07-02 19:19:10.136 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__habitacion_Id_0='?' (DbType = Int32), @__reservaId_1='?' (DbType = Int32), @__reserva_FechaSalida_2='?' (DbType = DateTime2), @__reserva_FechaEntrada_3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Reservas] AS [r]
        WHERE [r].[HabitacionId] = @__habitacion_Id_0 AND [r].[Id] <> @__reservaId_1 AND [r].[EstaCancelada] = CAST(0 AS bit) AND [r].[EstaElClienteEnHostal] = CAST(1 AS bit) AND [r].[FechaEntrada] <= @__reserva_FechaSalida_2 AND [r].[FechaSalida] >= @__reserva_FechaEntrada_3) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:19:10.138 -04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-02 19:19:10.139 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul) in 22.0886ms
2025-07-02 19:19:10.140 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.CambiarHabitacion (HostalIslaAzul)'
2025-07-02 19:19:10.140 -04:00 [INF] HTTP POST /api/Reservas/4/cambiar-habitacion responded 400 in 24.4681 ms
2025-07-02 19:19:10.142 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/4/cambiar-habitacion - 400 null text/plain; charset=utf-8 28.6512ms
2025-07-02 19:21:27.423 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - application/json 73
2025-07-02 19:21:27.424 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:21:27.466 -04:00 [INF] Route matched with {action = "AsignarHabitacionAma", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AsignarHabitacionAma(AsignacionHabitacionAmaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:21:27.592 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 19:21:27.685 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__habitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__habitacionNumero_0
2025-07-02 19:21:27.712 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32), @__habitacionNumero_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HabitacionesAmasDeLlaves] AS [h]
        WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0 AND [h].[HabitacionNumero] = @__habitacionNumero_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:21:27.935 -04:00 [ERR] Failed executing DbCommand (32ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HabitacionesAmasDeLlaves] ([AmaDeLlavesId], [HabitacionNumero], [HabitacionId], [Turno])
VALUES (@p0, @p1, @p2, @p3);
2025-07-02 19:21:28.001 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'HostalIslaAzul.Infrastructure.HostalDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6c720cba-fb86-4c67-bb24-bd5fcf75d683
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:6c720cba-fb86-4c67-bb24-bd5fcf75d683
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-02 19:21:28.009 -04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-07-02 19:21:28.011 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul) in 536.6842ms
2025-07-02 19:21:28.012 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:21:28.013 -04:00 [ERR] HTTP POST /api/Reservas/asignar-habitacion-ama responded 500 in 588.3368 ms
2025-07-02 19:21:28.015 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - 500 null text/plain; charset=utf-8 591.4566ms
2025-07-02 19:25:21.668 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - application/json 73
2025-07-02 19:25:21.671 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:25:21.674 -04:00 [INF] Route matched with {action = "AsignarHabitacionAma", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AsignarHabitacionAma(AsignacionHabitacionAmaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:25:22.462 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 19:25:22.467 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__habitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__habitacionNumero_0
2025-07-02 19:25:22.478 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32), @__habitacionNumero_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HabitacionesAmasDeLlaves] AS [h]
        WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0 AND [h].[HabitacionNumero] = @__habitacionNumero_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:25:22.491 -04:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HabitacionesAmasDeLlaves] ([AmaDeLlavesId], [HabitacionNumero], [HabitacionId], [Turno])
VALUES (@p0, @p1, @p2, @p3);
2025-07-02 19:25:22.503 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'HostalIslaAzul.Infrastructure.HostalDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:973ac3a2-95ad-4440-8108-d73228e98566
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:973ac3a2-95ad-4440-8108-d73228e98566
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-02 19:25:22.511 -04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-07-02 19:25:22.514 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul) in 837.9805ms
2025-07-02 19:25:22.518 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:25:22.519 -04:00 [ERR] HTTP POST /api/Reservas/asignar-habitacion-ama responded 500 in 847.6203 ms
2025-07-02 19:25:22.520 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - 500 null text/plain; charset=utf-8 851.3119ms
2025-07-02 19:33:30.561 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - application/json 73
2025-07-02 19:33:30.562 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:33:30.563 -04:00 [INF] Route matched with {action = "AsignarHabitacionAma", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AsignarHabitacionAma(AsignacionHabitacionAmaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:33:31.554 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 19:33:31.557 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__habitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__habitacionNumero_0
2025-07-02 19:33:31.562 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32), @__habitacionNumero_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HabitacionesAmasDeLlaves] AS [h]
        WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0 AND [h].[HabitacionNumero] = @__habitacionNumero_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:33:31.573 -04:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HabitacionesAmasDeLlaves] ([AmaDeLlavesId], [HabitacionNumero], [HabitacionId], [Turno])
VALUES (@p0, @p1, @p2, @p3);
2025-07-02 19:33:31.579 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'HostalIslaAzul.Infrastructure.HostalDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bba9e19-9c4c-4b71-9d8a-94aedcb5c6f9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bba9e19-9c4c-4b71-9d8a-94aedcb5c6f9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-02 19:33:31.617 -04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-07-02 19:33:31.623 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul) in 1059.0647ms
2025-07-02 19:33:31.625 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:33:31.628 -04:00 [ERR] HTTP POST /api/Reservas/asignar-habitacion-ama responded 500 in 1066.0049 ms
2025-07-02 19:33:31.632 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - 500 null text/plain; charset=utf-8 1071.2106ms
2025-07-02 19:38:19.447 -04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - application/json 73
2025-07-02 19:38:19.449 -04:00 [INF] Executing endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:38:19.450 -04:00 [INF] Route matched with {action = "AsignarHabitacionAma", controller = "Reservas"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AsignarHabitacionAma(AsignacionHabitacionAmaDto) on controller HostalIslaAzul.Controllers.ReservasController (HostalIslaAzul).
2025-07-02 19:38:19.467 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[CI], [a].[NombreApellidos], [a].[NumeroTelefonico]
FROM [AmasDeLlaves] AS [a]
WHERE [a].[Id] = @__p_0
2025-07-02 19:38:19.489 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__habitacionNumero_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[Id], [h].[EstaFueraDeServicio], [h].[Numero]
FROM [Habitaciones] AS [h]
WHERE [h].[Numero] = @__habitacionNumero_0
2025-07-02 19:38:19.498 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__amaDeLlavesId_0='?' (DbType = Int32), @__habitacionNumero_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HabitacionesAmasDeLlaves] AS [h]
        WHERE [h].[AmaDeLlavesId] = @__amaDeLlavesId_0 AND [h].[HabitacionNumero] = @__habitacionNumero_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-02 19:38:19.516 -04:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [HabitacionesAmasDeLlaves] ([AmaDeLlavesId], [HabitacionNumero], [HabitacionId], [Turno])
VALUES (@p0, @p1, @p2, @p3);
2025-07-02 19:38:19.525 -04:00 [ERR] An exception occurred in the database while saving changes for context type 'HostalIslaAzul.Infrastructure.HostalDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bba9e19-9c4c-4b71-9d8a-94aedcb5c6f9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Instrucción INSERT en conflicto con la restricción FOREIGN KEY 'FK_HabitacionesAmasDeLlaves_Habitaciones_HabitacionId'. El conflicto ha aparecido en la base de datos 'HostalIslaAzulDb', tabla 'dbo.Habitaciones', column 'Id'.
Se terminó la instrucción.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:5bba9e19-9c4c-4b71-9d8a-94aedcb5c6f9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-02 19:38:19.546 -04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-07-02 19:38:19.548 -04:00 [INF] Executed action HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul) in 95.1881ms
2025-07-02 19:38:19.548 -04:00 [INF] Executed endpoint 'HostalIslaAzul.Controllers.ReservasController.AsignarHabitacionAma (HostalIslaAzul)'
2025-07-02 19:38:19.549 -04:00 [ERR] HTTP POST /api/Reservas/asignar-habitacion-ama responded 500 in 99.6678 ms
2025-07-02 19:38:19.573 -04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5014/api/Reservas/asignar-habitacion-ama - 500 null text/plain; charset=utf-8 108.3673ms
2025-07-02 19:54:35.547 -04:00 [INF] Application is shutting down...
2025-07-02 22:02:06.648 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.AmaDeLlavesId1' was created in shadow state because a conflicting property with the simple name 'AmaDeLlavesId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:02:06.895 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:02:07.032 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 22:02:07.723 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.AmaDeLlavesId1' was created in shadow state because a conflicting property with the simple name 'AmaDeLlavesId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:02:07.724 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:02:07.736 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 22:02:58.162 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.AmaDeLlavesId1' was created in shadow state because a conflicting property with the simple name 'AmaDeLlavesId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:02:58.492 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:02:58.740 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 22:03:27.170 -04:00 [INF] Iniciando la aplicación HostalIslaAzul...
2025-07-02 22:06:19.512 -04:00 [INF] Iniciando la aplicación HostalIslaAzul...
2025-07-02 22:12:15.039 -04:00 [WRN] Failed to determine the https port for redirect.
2025-07-02 22:12:18.024 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.AmaDeLlavesId1' was created in shadow state because a conflicting property with the simple name 'AmaDeLlavesId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:12:18.034 -04:00 [WRN] The foreign key property 'HabitacionAmaDeLlaves.HabitacionId1' was created in shadow state because a conflicting property with the simple name 'HabitacionId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-02 22:12:18.280 -04:00 [WRN] No store type was specified for the decimal property 'Importe' on entity type 'Reserva'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-02 22:12:22.678 -04:00 [INF] HTTP GET /api/AmasDeLlaves responded 200 in 7687.7324 ms
2025-07-02 22:13:25.381 -04:00 [INF] Traza registrada: Creación en AmasDeLlaves (ID: 2)
2025-07-02 22:13:25.475 -04:00 [INF] HTTP POST /api/AmasDeLlaves responded 201 in 1244.0576 ms
2025-07-02 22:13:55.994 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 696.8456 ms
2025-07-02 22:14:25.027 -04:00 [INF] HTTP GET /api/Reservas/activas responded 200 in 42.6746 ms
2025-07-02 22:15:37.922 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-por-ama-de-llaves/1 responded 200 in 155.2208 ms
2025-07-02 22:15:46.396 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-por-ama-de-llaves/2 responded 200 in 11.3546 ms
2025-07-02 22:16:11.094 -04:00 [INF] HTTP GET /api/AmasDeLlaves responded 200 in 20.8779 ms
2025-07-02 22:17:01.100 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-disponibles responded 200 in 339.3087 ms
2025-07-02 22:17:44.575 -04:00 [INF] Asignando habitación 012 a ama de llaves 1 en turno Mañana
2025-07-02 22:17:45.012 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 2-1-Mañana)
2025-07-02 22:17:45.014 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 515.0424 ms
2025-07-02 22:18:02.377 -04:00 [INF] Asignando habitación 011 a ama de llaves 1 en turno Mañana
2025-07-02 22:18:02.390 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 400 in 16.1355 ms
2025-07-02 22:18:10.689 -04:00 [INF] Asignando habitación 013 a ama de llaves 1 en turno Mañana
2025-07-02 22:18:10.744 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 3-1-Mañana)
2025-07-02 22:18:10.746 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 59.8207 ms
2025-07-02 22:18:17.344 -04:00 [INF] Asignando habitación 014 a ama de llaves 1 en turno Mañana
2025-07-02 22:18:17.397 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 4-1-Mañana)
2025-07-02 22:18:17.398 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 59.3739 ms
2025-07-02 22:18:22.324 -04:00 [INF] Asignando habitación 015 a ama de llaves 1 en turno Mañana
2025-07-02 22:18:22.382 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 5-1-Mañana)
2025-07-02 22:18:22.393 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 70.2305 ms
2025-07-02 22:18:49.300 -04:00 [INF] Asignando habitación 021 a ama de llaves 2 en turno Tarde
2025-07-02 22:18:49.366 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 6-2-Tarde)
2025-07-02 22:18:49.369 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 71.8232 ms
2025-07-02 22:18:54.052 -04:00 [INF] Asignando habitación 022 a ama de llaves 2 en turno Tarde
2025-07-02 22:18:54.105 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 7-2-Tarde)
2025-07-02 22:18:54.106 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 55.3978 ms
2025-07-02 22:19:00.081 -04:00 [INF] Asignando habitación 023 a ama de llaves 2 en turno Tarde
2025-07-02 22:19:00.132 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 8-2-Tarde)
2025-07-02 22:19:00.134 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 54.4242 ms
2025-07-02 22:19:04.705 -04:00 [INF] Asignando habitación 024 a ama de llaves 2 en turno Tarde
2025-07-02 22:19:04.755 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 9-2-Tarde)
2025-07-02 22:19:04.756 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 54.0334 ms
2025-07-02 22:19:09.621 -04:00 [INF] Asignando habitación 025 a ama de llaves 2 en turno Tarde
2025-07-02 22:19:09.656 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 10-2-Tarde)
2025-07-02 22:19:09.658 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 38.3522 ms
2025-07-02 22:24:10.845 -04:00 [INF] HTTP GET /api/Reservas/habitaciones-por-ama-de-llaves/2 responded 200 in 99.9976 ms
2025-07-02 22:26:11.316 -04:00 [INF] Asignando habitación 011 a ama de llaves 1 en turno Mañana
2025-07-02 22:26:11.335 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 400 in 21.2394 ms
2025-07-02 22:27:01.150 -04:00 [INF] Traza registrada: Fuera de servicio en Habitaciones (ID: 1)
2025-07-02 22:27:01.151 -04:00 [INF] HTTP POST /api/Habitaciones/1/fuera-de-servicio responded 204 in 154.7470 ms
2025-07-02 22:27:58.488 -04:00 [INF] Traza registrada: Modificación en Habitaciones (ID: 1)
2025-07-02 22:27:58.490 -04:00 [INF] HTTP PUT /api/Habitaciones/1 responded 200 in 113.8318 ms
2025-07-02 22:28:04.172 -04:00 [INF] Traza registrada: Modificación en Habitaciones (ID: 1)
2025-07-02 22:28:04.178 -04:00 [INF] HTTP PUT /api/Habitaciones/1 responded 200 in 39.3744 ms
2025-07-02 22:28:49.372 -04:00 [INF] Asignando habitación 011 a ama de llaves 1 en turno Mañana
2025-07-02 22:28:49.450 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 1-1-Mañana)
2025-07-02 22:28:49.460 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 90.9737 ms
2025-07-02 22:31:37.250 -04:00 [INF] Traza registrada: Modificación en AmasDeLlaves (ID: 1)
2025-07-02 22:31:37.256 -04:00 [INF] HTTP PUT /api/AmasDeLlaves/1 responded 200 in 117.3111 ms
2025-07-02 22:45:35.700 -04:00 [INF] Asignando habitación 021 a ama de llaves 1 en turno Tarde
2025-07-02 22:45:37.095 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 6-1-Tarde)
2025-07-02 22:45:37.096 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 1399.1258 ms
2025-07-02 22:45:41.549 -04:00 [INF] Asignando habitación 022 a ama de llaves 1 en turno Tarde
2025-07-02 22:45:41.602 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 7-1-Tarde)
2025-07-02 22:45:41.632 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 84.5076 ms
2025-07-02 22:47:03.266 -04:00 [INF] Asignando habitación 011 a ama de llaves 2 en turno Mañana
2025-07-02 22:47:03.308 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 1-2-Mañana)
2025-07-02 22:47:03.324 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 58.8644 ms
2025-07-02 22:47:07.362 -04:00 [INF] Asignando habitación 012 a ama de llaves 2 en turno Mañana
2025-07-02 22:47:07.385 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 2-2-Mañana)
2025-07-02 22:47:07.388 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 26.5811 ms
2025-07-02 22:48:21.021 -04:00 [INF] Desasignando habitación 011 de ama de llaves 1
2025-07-02 22:48:21.195 -04:00 [INF] Traza registrada: Desasignación en HabitacionesAmasDeLlaves (ID: 1-1)
2025-07-02 22:48:21.197 -04:00 [INF] HTTP POST /api/Reservas/desasignar-habitacion-ama responded 204 in 241.3287 ms
2025-07-02 22:49:22.582 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 400 in 2.1804 ms
2025-07-02 22:49:40.132 -04:00 [INF] Asignando habitación 011 a ama de llaves 1 en turno Mañana
2025-07-02 22:49:40.189 -04:00 [INF] Traza registrada: Asignación en HabitacionesAmasDeLlaves (ID: 1-1-Mañana)
2025-07-02 22:49:40.199 -04:00 [INF] HTTP POST /api/Reservas/asignar-habitacion-ama responded 204 in 69.2292 ms
2025-07-02 23:28:23.016 -04:00 [INF] HTTP POST /api/Reservas/1/cambiar-habitacion responded 400 in 883.1296 ms
2025-07-02 23:28:38.883 -04:00 [INF] HTTP POST /api/Reservas/2/cambiar-habitacion responded 400 in 9.5742 ms
2025-07-02 23:28:48.725 -04:00 [INF] Traza registrada: Cambio de habitación en Reservas (ID: 3)
2025-07-02 23:28:48.726 -04:00 [INF] HTTP POST /api/Reservas/3/cambiar-habitacion responded 204 in 331.6210 ms
2025-07-02 23:30:48.535 -04:00 [INF] Traza registrada: Cambio de habitación en Reservas (ID: 3)
2025-07-02 23:30:48.536 -04:00 [INF] HTTP POST /api/Reservas/3/cambiar-habitacion responded 204 in 49.6648 ms
2025-07-02 23:31:18.590 -04:00 [INF] HTTP POST /api/Reservas/3/cambiar-habitacion responded 400 in 16.6111 ms
